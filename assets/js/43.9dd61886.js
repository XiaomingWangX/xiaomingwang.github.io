(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{315:function(_,v,t){"use strict";t.r(v);var n=t(10),a=Object(n.a)({},function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"执行计划"}},[_._v("执行计划")]),_._v(" "),t("h4",{attrs:{id:"什么是执行计划"}},[_._v("什么是执行计划")]),_._v(" "),t("p",[_._v("使用EXPLAIN 关键字可以模拟优化器执行SQL查询语句，从而知道Mysql是如何处理你的SQL语句的，分析你的查询语句或者表结构的性能瓶颈")]),_._v(" "),t("ul",[t("li",[_._v("表的读取顺序")]),_._v(" "),t("li",[_._v("数据读取操作的操作类型")]),_._v(" "),t("li",[_._v("哪些索引可以使用")]),_._v(" "),t("li",[_._v("哪些索引实际被使用")]),_._v(" "),t("li",[_._v("表之间的引用")]),_._v(" "),t("li",[_._v("每张表有多少被优化器查询")])]),_._v(" "),t("h4",{attrs:{id:"语法"}},[_._v("语法")]),_._v(" "),t("p",[t("code",[_._v("Explain ")]),_._v(" + "),t("code",[_._v("SQL")]),_._v("语句")]),_._v(" "),t("p",[_._v("执行计划分析\n"),t("img",{attrs:{src:"/img/database/mysql2.png",alt:"mysql2"}})]),_._v(" "),t("ol",[t("li",[_._v("id: 执行顺序，如果id相等的， 会按照从上往下依次查询， id越大越先执行")]),_._v(" "),t("li",[_._v("select_type : 查询类型，")])]),_._v(" "),t("ul",[t("li",[_._v("SIMPLE: （不包含UNION，不包含子查询，就是最简单的查询）")]),_._v(" "),t("li",[_._v("PRIMARY : 查询中若包含任何复杂的子查询，最外层的查询被标记为PRIMARY")]),_._v(" "),t("li",[_._v("SUBQUERY： 子查询")]),_._v(" "),t("li",[_._v("DERIVED： 衍生表查询")]),_._v(" "),t("li",[_._v("UNION： 若第二个查询带有UNION，则被标记为UNION")]),_._v(" "),t("li",[_._v("UNION RESULT: UNION的聚合结果")])]),_._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[_._v("table: 操作的那张表")]),_._v(" "),t("li",[_._v("type ： type显示的是访问类型，是较为重要的一个指标，结果只是从最好到最坏\nsystem > const > eq_ref > ref > rang > index > ALL\nconst : 经过一次就可以找到\neq_ref: 唯一性索引，\nref: 不是唯一索引\nrang : 带有between in 等\nindex: 查询列都是索引的\nALL： 全表扫描的\n5： passbile_keys： 可能会用到的索引\n6： key: 实际中使用的索引，如果为NULL，则没有使用索引")])]),_._v(" "),t("h2",{attrs:{id:"sql-优化原则"}},[_._v("SQL 优化原则")]),_._v(" "),t("ul",[t("li",[_._v("列类型选择 优先级： 整型 > date, tiime> enum, char > varchar > blob, text")]),_._v(" "),t("li",[_._v("选择列长度的时候，够用就行原则，不要设置过大， 比如声明varchar(100) 和varchar(300)， 在表联查的时候varchar(300)会占更多内存")]),_._v(" "),t("li",[_._v("尽量避免使用NULL")])]),_._v(" "),t("h2",{attrs:{id:"查看索引页"}},[_._v("查看索引页")]),_._v(" "),t("p",[_._v("SELECT\nb.NAME,\na.NAME,\nindex_id,\ntype,\na.space,\na.PAGE_NO\nFROM\ninformation_schema.INNODB_SYS_INDEXES a,\ninformation_schema.INNODB_SYS_TABLES b\nWHERE\na.table_id = b.table_id\nAND a.space <> 0;\n//and b.NAME LIKE '%sp_job_log';")]),_._v(" "),t("h2",{attrs:{id:"查看表内存大小"}},[_._v("查看表内存大小")]),_._v(" "),t("p",[_._v("SELECT\ncount( 1 )\nFROM\njsd_xd_repayment_continual;")]),_._v(" "),t("p",[_._v("select concat(round(sum(data_length/1024/1024),2),'M') as data from "),t("code",[_._v("tables")]),_._v(" where table_name ='jsd_xd_repayment_continual';")])])},[],!1,null,null,null);v.default=a.exports}}]);