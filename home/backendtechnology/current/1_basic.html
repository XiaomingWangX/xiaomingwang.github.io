<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>多线程基础 | 后端学习分享</title>
    <meta name="description" content="记录记录,出来混迟早要还的">
    <link rel="icon" href="/img/logo.png">
  <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.1e12fa23.css" as="style"><link rel="preload" href="/assets/js/app.e1069856.js" as="script"><link rel="preload" href="/assets/js/2.f92a9c00.js" as="script"><link rel="preload" href="/assets/js/24.a0465d4d.js" as="script"><link rel="preload" href="/assets/js/5.f833677d.js" as="script"><link rel="prefetch" href="/assets/js/10.ee68d9ab.js"><link rel="prefetch" href="/assets/js/100.c548a5bc.js"><link rel="prefetch" href="/assets/js/101.ed73cad9.js"><link rel="prefetch" href="/assets/js/102.3782e5a1.js"><link rel="prefetch" href="/assets/js/103.1ca6979e.js"><link rel="prefetch" href="/assets/js/104.ee2bb9a7.js"><link rel="prefetch" href="/assets/js/105.f090c0dd.js"><link rel="prefetch" href="/assets/js/106.afd16ef4.js"><link rel="prefetch" href="/assets/js/107.c284f647.js"><link rel="prefetch" href="/assets/js/108.ebd45b61.js"><link rel="prefetch" href="/assets/js/109.51bfd683.js"><link rel="prefetch" href="/assets/js/11.b98e3149.js"><link rel="prefetch" href="/assets/js/110.954dd4ce.js"><link rel="prefetch" href="/assets/js/111.56be758a.js"><link rel="prefetch" href="/assets/js/112.10854013.js"><link rel="prefetch" href="/assets/js/113.ea7eaec2.js"><link rel="prefetch" href="/assets/js/114.3ec0155a.js"><link rel="prefetch" href="/assets/js/115.e8fffb0b.js"><link rel="prefetch" href="/assets/js/116.665f2f5f.js"><link rel="prefetch" href="/assets/js/117.3c44ff38.js"><link rel="prefetch" href="/assets/js/118.5ebf8dd6.js"><link rel="prefetch" href="/assets/js/119.3a6a18cc.js"><link rel="prefetch" href="/assets/js/12.36f4b56f.js"><link rel="prefetch" href="/assets/js/120.b30dddae.js"><link rel="prefetch" href="/assets/js/121.da4afc88.js"><link rel="prefetch" href="/assets/js/122.aedf44d9.js"><link rel="prefetch" href="/assets/js/123.368bbd05.js"><link rel="prefetch" href="/assets/js/124.63f90b92.js"><link rel="prefetch" href="/assets/js/125.88747637.js"><link rel="prefetch" href="/assets/js/126.103ab4ca.js"><link rel="prefetch" href="/assets/js/127.ea0ae6dd.js"><link rel="prefetch" href="/assets/js/128.25b152a0.js"><link rel="prefetch" href="/assets/js/129.9d56c23c.js"><link rel="prefetch" href="/assets/js/13.7f953f44.js"><link rel="prefetch" href="/assets/js/130.d9ea4c61.js"><link rel="prefetch" href="/assets/js/131.8f500f70.js"><link rel="prefetch" href="/assets/js/132.6dddf3ee.js"><link rel="prefetch" href="/assets/js/133.bab89f12.js"><link rel="prefetch" href="/assets/js/134.e3c2e54c.js"><link rel="prefetch" href="/assets/js/135.f6c0e445.js"><link rel="prefetch" href="/assets/js/136.bb2c3759.js"><link rel="prefetch" href="/assets/js/137.a937d6cb.js"><link rel="prefetch" href="/assets/js/138.89101b18.js"><link rel="prefetch" href="/assets/js/139.ee6aa01e.js"><link rel="prefetch" href="/assets/js/14.079331ab.js"><link rel="prefetch" href="/assets/js/140.4ba0e57e.js"><link rel="prefetch" href="/assets/js/141.bdd91226.js"><link rel="prefetch" href="/assets/js/142.5cf3a201.js"><link rel="prefetch" href="/assets/js/143.dc86f11b.js"><link rel="prefetch" href="/assets/js/144.1ebf2535.js"><link rel="prefetch" href="/assets/js/145.d9f36f4e.js"><link rel="prefetch" href="/assets/js/146.ebc2a989.js"><link rel="prefetch" href="/assets/js/147.c1ca7cf1.js"><link rel="prefetch" href="/assets/js/148.68e8b69b.js"><link rel="prefetch" href="/assets/js/149.e8b58c10.js"><link rel="prefetch" href="/assets/js/15.d62dbd06.js"><link rel="prefetch" href="/assets/js/150.69a620e3.js"><link rel="prefetch" href="/assets/js/151.6138e481.js"><link rel="prefetch" href="/assets/js/152.1738b7c7.js"><link rel="prefetch" href="/assets/js/153.8c107190.js"><link rel="prefetch" href="/assets/js/154.299688e6.js"><link rel="prefetch" href="/assets/js/155.aa45df91.js"><link rel="prefetch" href="/assets/js/156.2472b696.js"><link rel="prefetch" href="/assets/js/157.1dabf491.js"><link rel="prefetch" href="/assets/js/158.873610de.js"><link rel="prefetch" href="/assets/js/159.627e60ca.js"><link rel="prefetch" href="/assets/js/16.12e5018b.js"><link rel="prefetch" href="/assets/js/160.3bcbc64e.js"><link rel="prefetch" href="/assets/js/161.00593262.js"><link rel="prefetch" href="/assets/js/162.962f49d6.js"><link rel="prefetch" href="/assets/js/163.0b788e1d.js"><link rel="prefetch" href="/assets/js/164.ea83bce1.js"><link rel="prefetch" href="/assets/js/165.e512cbf5.js"><link rel="prefetch" href="/assets/js/166.8c7cdf43.js"><link rel="prefetch" href="/assets/js/167.1bafda9e.js"><link rel="prefetch" href="/assets/js/168.5a94d116.js"><link rel="prefetch" href="/assets/js/169.cb425b09.js"><link rel="prefetch" href="/assets/js/17.2e11af7c.js"><link rel="prefetch" href="/assets/js/170.f0141120.js"><link rel="prefetch" href="/assets/js/171.8a0e220e.js"><link rel="prefetch" href="/assets/js/18.7546cc5b.js"><link rel="prefetch" href="/assets/js/19.3e9642b6.js"><link rel="prefetch" href="/assets/js/20.3ba82c2f.js"><link rel="prefetch" href="/assets/js/21.84316a24.js"><link rel="prefetch" href="/assets/js/22.e0a04af0.js"><link rel="prefetch" href="/assets/js/23.f62d598e.js"><link rel="prefetch" href="/assets/js/25.ba37b866.js"><link rel="prefetch" href="/assets/js/26.76674591.js"><link rel="prefetch" href="/assets/js/27.97c23916.js"><link rel="prefetch" href="/assets/js/28.e6d39649.js"><link rel="prefetch" href="/assets/js/29.86525c82.js"><link rel="prefetch" href="/assets/js/3.09b2d87c.js"><link rel="prefetch" href="/assets/js/30.30a96ddf.js"><link rel="prefetch" href="/assets/js/31.d6ad5f12.js"><link rel="prefetch" href="/assets/js/32.2427006f.js"><link rel="prefetch" href="/assets/js/33.523587cf.js"><link rel="prefetch" href="/assets/js/34.b1278f31.js"><link rel="prefetch" href="/assets/js/35.55711bd0.js"><link rel="prefetch" href="/assets/js/36.3922289a.js"><link rel="prefetch" href="/assets/js/37.dd1cc712.js"><link rel="prefetch" href="/assets/js/38.7905c17a.js"><link rel="prefetch" href="/assets/js/39.5d09d9d6.js"><link rel="prefetch" href="/assets/js/4.a15be3f4.js"><link rel="prefetch" href="/assets/js/40.4a3ff39e.js"><link rel="prefetch" href="/assets/js/41.d381858a.js"><link rel="prefetch" href="/assets/js/42.ba050135.js"><link rel="prefetch" href="/assets/js/43.9dd61886.js"><link rel="prefetch" href="/assets/js/44.6097dae8.js"><link rel="prefetch" href="/assets/js/45.70d0e903.js"><link rel="prefetch" href="/assets/js/46.267a3373.js"><link rel="prefetch" href="/assets/js/47.c0284021.js"><link rel="prefetch" href="/assets/js/48.6bc06859.js"><link rel="prefetch" href="/assets/js/49.ae3f3546.js"><link rel="prefetch" href="/assets/js/50.0b500d94.js"><link rel="prefetch" href="/assets/js/51.f0c8aaa5.js"><link rel="prefetch" href="/assets/js/52.24ed79b5.js"><link rel="prefetch" href="/assets/js/53.d8b0412d.js"><link rel="prefetch" href="/assets/js/54.c9211ac0.js"><link rel="prefetch" href="/assets/js/55.a7606753.js"><link rel="prefetch" href="/assets/js/56.1642d983.js"><link rel="prefetch" href="/assets/js/57.9aa188e7.js"><link rel="prefetch" href="/assets/js/58.7eb7c1c2.js"><link rel="prefetch" href="/assets/js/59.bd13154e.js"><link rel="prefetch" href="/assets/js/6.5abba44a.js"><link rel="prefetch" href="/assets/js/60.694f2ffc.js"><link rel="prefetch" href="/assets/js/61.4fbf7b9e.js"><link rel="prefetch" href="/assets/js/62.5141679e.js"><link rel="prefetch" href="/assets/js/63.391f878e.js"><link rel="prefetch" href="/assets/js/64.039409df.js"><link rel="prefetch" href="/assets/js/65.9d19d5b1.js"><link rel="prefetch" href="/assets/js/66.5333487c.js"><link rel="prefetch" href="/assets/js/67.4cc235bd.js"><link rel="prefetch" href="/assets/js/68.fe55d09c.js"><link rel="prefetch" href="/assets/js/69.59393955.js"><link rel="prefetch" href="/assets/js/7.7df7f8d6.js"><link rel="prefetch" href="/assets/js/70.b6a61f83.js"><link rel="prefetch" href="/assets/js/71.81fafa30.js"><link rel="prefetch" href="/assets/js/72.62c4b4fa.js"><link rel="prefetch" href="/assets/js/73.76a8c1f4.js"><link rel="prefetch" href="/assets/js/74.71178a2e.js"><link rel="prefetch" href="/assets/js/75.33012e0b.js"><link rel="prefetch" href="/assets/js/76.35561a7a.js"><link rel="prefetch" href="/assets/js/77.5ec444ac.js"><link rel="prefetch" href="/assets/js/78.d7902207.js"><link rel="prefetch" href="/assets/js/79.f7a0489e.js"><link rel="prefetch" href="/assets/js/8.bd6eaa3f.js"><link rel="prefetch" href="/assets/js/80.e02127a6.js"><link rel="prefetch" href="/assets/js/81.01d2b539.js"><link rel="prefetch" href="/assets/js/82.ae9dd204.js"><link rel="prefetch" href="/assets/js/83.35b08877.js"><link rel="prefetch" href="/assets/js/84.60bf2230.js"><link rel="prefetch" href="/assets/js/85.195577c5.js"><link rel="prefetch" href="/assets/js/86.e8d54700.js"><link rel="prefetch" href="/assets/js/87.5cae5597.js"><link rel="prefetch" href="/assets/js/88.ba0e64c1.js"><link rel="prefetch" href="/assets/js/89.8375458d.js"><link rel="prefetch" href="/assets/js/9.b1d341fe.js"><link rel="prefetch" href="/assets/js/90.87c59b9e.js"><link rel="prefetch" href="/assets/js/91.628fb020.js"><link rel="prefetch" href="/assets/js/92.5d054e33.js"><link rel="prefetch" href="/assets/js/93.38992b86.js"><link rel="prefetch" href="/assets/js/94.54cca142.js"><link rel="prefetch" href="/assets/js/95.d722e344.js"><link rel="prefetch" href="/assets/js/96.cce6941f.js"><link rel="prefetch" href="/assets/js/97.6461b059.js"><link rel="prefetch" href="/assets/js/98.e62a9ee2.js"><link rel="prefetch" href="/assets/js/99.da45df71.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1e12fa23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="后端学习分享" class="logo"> <span class="site-name can-hide">后端学习分享</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/home/" class="nav-link router-link-active">首页</a></div><div class="nav-item"><a href="/home/backendtechnology/database/1_mysql.html" class="nav-link">学习总结</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/XiaomingWangX" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/samxwang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/XiaomingWangX/vueBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    贡献代码！
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/home/" class="nav-link router-link-active">首页</a></div><div class="nav-item"><a href="/home/backendtechnology/database/1_mysql.html" class="nav-link">学习总结</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">链接</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/XiaomingWangX" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/samxwang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/XiaomingWangX/vueBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    贡献代码！
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/home/" class="sidebar-heading clickable router-link-active open"><span>后端栈</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/database/" class="sidebar-heading clickable"><span>数据库</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/basic/" class="sidebar-heading clickable"><span>操作系统</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/jvm/" class="sidebar-heading clickable"><span>JVM</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/microservice/" class="sidebar-heading clickable"><span>微服务</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/redis/" class="sidebar-heading clickable"><span>redis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/network/" class="sidebar-heading clickable"><span>网络</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/spring/" class="sidebar-heading clickable"><span>Spring</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/current/" class="sidebar-heading clickable router-link-active open"><span>并发编程</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/home/backendtechnology/current/1_basic.html" class="active sidebar-link">多线程基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#死锁" class="sidebar-link">死锁</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#死锁条件" class="sidebar-link">死锁条件</a></li><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#notify-notifyall" class="sidebar-link">notify notifyall</a></li></ul></li><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#创建线程方式" class="sidebar-link">创建线程方式</a></li><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#synchronized-和lock" class="sidebar-link">synchronized 和lock</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#synchoronized" class="sidebar-link">synchoronized</a></li><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#lock" class="sidebar-link">Lock</a></li><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#阻塞队列" class="sidebar-link">阻塞队列</a></li><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#多线程之间怎么通讯" class="sidebar-link">多线程之间怎么通讯</a></li><li class="sidebar-sub-header"><a href="/home/backendtechnology/current/1_basic.html#线程池" class="sidebar-link">线程池</a></li></ul></li></ul></li><li><a href="/home/backendtechnology/current/2_synchronized.html" class="sidebar-link">synchronized</a></li><li><a href="/home/backendtechnology/current/3_volatile.html" class="sidebar-link">volatile(内存可见)</a></li><li><a href="/home/backendtechnology/current/4_ReentrantLock.html" class="sidebar-link">ReentrantLock</a></li><li><a href="/home/backendtechnology/current/5_Lock.html" class="sidebar-link">Lock 和 CountDownLatch</a></li><li><a href="/home/backendtechnology/current/6_threadpool.html" class="sidebar-link">线程池</a></li><li><a href="/home/backendtechnology/current/7_collection.html" class="sidebar-link">并发集合</a></li><li><a href="/home/backendtechnology/current/7.1_threadLocal.html" class="sidebar-link">ThreadLocal</a></li><li><a href="/home/backendtechnology/current/8_comprehensive.html" class="sidebar-link">综合</a></li><li><a href="/home/backendtechnology/current/9_semaphoreAndCyclicBarrier.html" class="sidebar-link">线程约束</a></li><li><a href="/home/backendtechnology/current/10_ThreadCommunication.html" class="sidebar-link">线程通信</a></li><li><a href="/home/backendtechnology/current/12_Case.html" class="sidebar-link">情景案例</a></li><li><a href="/home/backendtechnology/current/13_AbstractQueuedSynchronizer.html" class="sidebar-link">AQS(AbstractQueuedSynchronizer)</a></li><li><a href="/home/backendtechnology/current/14_selfLock.html" class="sidebar-link">自己实现锁</a></li><li><a href="/home/backendtechnology/current/15_selfLock1.html" class="sidebar-link">通过lock 手写阻塞队列</a></li><li><a href="/home/backendtechnology/current/16_selfLock2.html" class="sidebar-link">通过Condition  手写阻塞队列</a></li><li><a href="/home/backendtechnology/current/17_customProducer.html" class="sidebar-link">阻塞队列实现生产者消费者模式</a></li><li><a href="/home/backendtechnology/current/18_CyclicBarrier.html" class="sidebar-link">CyclicBarrier 栅栏</a></li><li><a href="/home/backendtechnology/current/19_MarriagePhaser.html" class="sidebar-link">MarriagePhaser 栅栏</a></li><li><a href="/home/backendtechnology/current/20_ReadWriteLock.html" class="sidebar-link">ReadWriteLock 读写锁</a></li><li><a href="/home/backendtechnology/current/21_Semaphore.html" class="sidebar-link">Semaphore 信号量</a></li><li><a href="/home/backendtechnology/current/22_ThreadPool.html" class="sidebar-link">ThreadPoolExecutor  线程池</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/es/" class="sidebar-heading clickable"><span>es</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/mq/" class="sidebar-heading clickable"><span>mq</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/deploy/" class="sidebar-heading clickable"><span>部署</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/deploy/deployplatform/" class="sidebar-heading clickable"><span>平台即服务</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/deploy/dockerinstall/" class="sidebar-heading clickable"><span>Docker安装</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/design/" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/datastructure/" class="sidebar-heading clickable"><span>数据结构算法</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/video/" class="sidebar-heading clickable"><span>流媒体</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/home/" class="sidebar-heading clickable router-link-active"><span>运维等拓展</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="死锁">死锁</h2> <h3 id="死锁条件">死锁条件</h3> <p>1.互斥条件  同一时间只能有一个线程获取资源
2.循环等待  多个线程互相等待对方释放资源
3.不可剥夺条件 一个线程已经占有的资源,在释放前不会被其它线程抢占
4.请求和保持条件 线程等待过程中不会释放已经占有的资源</p> <h3 id="notify-notifyall">notify notifyall</h3> <p>1.notify 只会唤醒一个线程进入锁池  hospot 1.8等待池有顺序 set存储的
2.notifyall 会把所有等待池的对象移动到锁池 竞争</p> <h2 id="创建线程方式">创建线程方式</h2> <p>继承Thread类
实现Runable
通过Callable和Future创建线程
线程池</p> <h2 id="synchronized-和lock">synchronized 和lock</h2> <h3 id="synchoronized">synchoronized</h3> <p>1.jvm关键字在jvm层面上 monitorenter monitorexit
2.假设A线程获取锁,B线程等待,如果A阻塞,B线程会一直等待
3.1)以获取锁的线程执行完同步代码,释放锁 2）线程执行发生异常,jvm会让线程释放
4.锁可重入，不可中断 非公平
5.适合少量同步
6.是独占锁</p> <h3 id="lock">Lock</h3> <p>1.jvm的一个接口
2.视情况而定，lock由多个锁获取的方式,大致就可以尝试获取锁，线程可以不用一直等待。（可以tryLock获取锁)
3.finally中必须释放锁，不然会造成线程死锁
4.可重入 可中断 可公平
5.适用于大量同步
6.公平锁和非公平锁</p> <h3 id="阻塞队列">阻塞队列</h3> <h4 id="arrayblockingqueue">ArrayBlockingQueue</h4> <p>基于数组的阻塞队列实现
ReentrantLock 实现 不能生产消费同时进行</p> <h4 id="linkedblockingqueue">LinkedBlockingQueue</h4> <p>基于单向链表的阻塞队列实现 可以指定指定大小，也可以不指定
但是不指定是Integer.MAX_VALUE 生产速度大于消费速度的话 内存可能被消耗殆尽
所分离 可以生产者 消费者同时进行</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Productor</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">MyBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NodeItem</span><span class="token punctuation">&gt;</span></span> queue<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token class-name">Productor</span><span class="token punctuation">(</span><span class="token class-name">MyBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NodeItem</span><span class="token punctuation">&gt;</span></span> queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> queue<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token class-name">RandomUtils</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">NodeItem</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            node<span class="token punctuation">.</span><span class="token function">setKey</span><span class="token punctuation">(</span><span class="token class-name">GlobalKey</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;produce a node&quot;</span> <span class="token operator">+</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            queue<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="proorityblockingqueue">ProorityBlockingQueue</h4> <p>支持优先级排序的无界阻塞队列</p> <h4 id="synchronousblockingqueue">SynchronousBlockingQueue</h4> <p>一个不存储原色的阻塞队列</p> <h4 id="delayqueue">DelayQueue</h4> <p>一个使用优先级队列实现的误解阻塞队列</p> <h3 id="多线程之间怎么通讯">多线程之间怎么通讯</h3> <p>信号量 信号 套接字 管道 共享内存 mq</p> <p>1、通过共享变量，变量需要volatile 修饰
2、使用wait()和notifyAll()方法，但是由于需要使用同一把锁，所以必须通知线程释放锁，被通知线程才
能获取到锁，这样导致通知不及时。
3、使用CountDownLatch实现，通知线程到指定条件，调用countDownLatch.countDown()，被通知
线程进行countDownLatch.await()。
4、使用Condition的await()和signalAll()方法</p> <h3 id="线程池">线程池</h3> <h4 id="executor提供了几种线程池">Executor提供了几种线程池</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>   1.newCachedThreadPool 工作队列是SynchronousQueue
   创建一个线程池，如果线程池中的线程数量过大，它可以有效的回收多余的线程，如果线程数不足，那么它可 以创建新的线程。 
   不足：这种方式虽然可以根据业务场景自动的扩展线程数来处理我们的业务，但是最多需要多少个线程同时处 理却是我们无法控制的。
   优点：如果当第二个任务开始，第一个任务已经执行结束，那么第二个任务会复用第一个任务创建的线程，并 不会重新创建新的线程，提高了线程的复用率。 
   作用：该方法返回一个可以根据实际情况调整线程池中线程的数量的线程池。即该线程池中的线程数量不确 定，是根据实际情况动态调整的
 
   2.newFixedThreadPool 工作队列使用的是linkedBlockingQueue
   这种方式可以指定线程池中的线程数。如果满了后又来了新任务，此时只能排队等待。
   优点：newFixedThreadPool 的线程数是可以进行控制的，因此我们可以通过控制最大线程来使我们的服务 器达到最大的使用率，同时又可以保证即使流量突然增大也不会占用服务器过多的资源。
   作用：该方法返回一个固定线程数量的线程池，该线程池中的线程数量始终不变，即不会再创建新的线程，也 不会销毁已经创建好的线程，
   自始自终都是那几个固定的线程在工作，所以该线程池可以控制线程的最大并发数。
   
   3.newScheduledThreadPool 
   该线程池支持定时，以及周期性的任务执行，我们可以延迟任务的执行时间，也可以设置一个周期性的时间让 任务重复执行。该线程池中有以下两种延迟的方法。
   scheduleAtFixedRate 不同的地方是任务的执行时间，如果间隔时间大于任务的执行时间，任务不受执行 时间的影响。
   如果间隔时间小于任务的执行时间，那么任务执行结束之后，会立马执行，至此间隔时间就会被 打乱。 scheduleWithFixedDelay 的间隔时间不会受任务执行时间长短的影响。
   作用：该方法返回一个可以控制线程池内线程定时或周期性执行某任务的线程池。
   
   4.newSingleThreadPool
   这是一个单线程池，至始至终都由一个线程来执行。 
   作用：该方法返回一个只有一个线程的线程池，即每次只能执行一个线程任务，多余的任务会保存到一个任务 队列中，等待这一个线程空闲，当这个线程空闲了再按 FIFO 方式顺序执行任务队列中的任务。
   
   5.newSingleThreadScheduledExecutor()
   
   只有一个线程，用来调度任务在指定时间执行。 
   作用：该方法返回一个可以控制线程池内线程定时或周期性执行某任务的线程池。
   只不过和上面的区别是该线 程池大小为 1，而上面的可以指定线程池的大小。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="线程池参数">线程池参数</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>   int corePoolSize,//线程池核心线程大小 
   int maximumPoolSize,//线程池最大线程数量 
   long keepAliveTime,//空闲线程存活时间 
   TimeUnit unit,//空闲线程存活时间单位，
   
   一共有七种静态属性(
   TimeUnit.DAYS天,
   TimeUnit.HOURS 小时,
   TimeUnit.MINUTES分钟,
   TimeUnit.SECONDS秒,
   TimeUnit.MILLISECONDS毫 秒,Runnable
   TimeUnit.MICROSECONDS微妙,
   TimeUnit.NANOSECONDS纳秒) 
   BlockingQueue&lt;Runnable&gt; workQueue,//工作队列 
   ThreadFactory threadFactory,//线程工厂，主要用来创建线程(默认的工厂方法是： Executors.defaultThreadFactory()对线程进行安全检查并命名) 
   RejectedExecutionHandler handler//拒绝策略(默认是：ThreadPoolExecutor.AbortPolicy不 执行并抛出异常)
   
   #### 任务放置的顺序过程
   任务调度是线程池的主要入口，当用户提交了一个任务，接下来这个任务将如何执行都是由这个阶段决定的。 了解这部分就相当于了解了线程池的核心运行机制。 
   首先，所有任务的调度都是由execute方法完成的，这部分完成的工作是：检查现在线程池的运行状态、运行 线程数、运行策略，决定接下来执行的流程，是直接申请线程执行，或是缓冲到队列中执行，亦或是直接拒绝 该任务。
   其执行过程如下： 首先检测线程池运行状态，如果不是RUNNING，则直接拒绝，线程池要保证在RUNNING的状态下执行任务。 如果workerCount &lt; corePoolSize，则创建并启动一个线程来执行新提交的任务。 
   如果workerCount &gt;= corePoolSize，且线程池内的阻塞队列未满，则将任务添加到该阻塞队列中。 如果workerCount &gt;= corePoolSize &amp;&amp; workerCount &lt; maximumPoolSize，且线程池内的阻塞队 列已满，
   则创建并启动一个线程来执行新提交的任务。 如果workerCount &gt;= maximumPoolSize，并且线程池内的阻塞队列已满, 则根据拒绝策略来处理该任 务, 默认的处理方式是直接抛异常。</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: : </span> <span class="time">11/4/2021, 6:26:54 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/home/backendtechnology/spring/3_springConfiguration.html" class="prev">
          Configuration
        </a></span> <span class="next"><a href="/home/backendtechnology/current/2_synchronized.html">
          synchronized
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.e1069856.js" defer></script><script src="/assets/js/2.f92a9c00.js" defer></script><script src="/assets/js/24.a0465d4d.js" defer></script><script src="/assets/js/5.f833677d.js" defer></script>
  </body>
</html>
