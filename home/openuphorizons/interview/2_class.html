<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JVM åŸç† | åç«¯å­¦ä¹ åˆ†äº«</title>
    <meta name="description" content="è®°å½•è®°å½•,å‡ºæ¥æ··è¿Ÿæ—©è¦è¿˜çš„">
    <link rel="icon" href="/img/logo.png">
  <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.1e12fa23.css" as="style"><link rel="preload" href="/assets/js/app.e1069856.js" as="script"><link rel="preload" href="/assets/js/2.f92a9c00.js" as="script"><link rel="preload" href="/assets/js/144.1ebf2535.js" as="script"><link rel="preload" href="/assets/js/5.f833677d.js" as="script"><link rel="prefetch" href="/assets/js/10.ee68d9ab.js"><link rel="prefetch" href="/assets/js/100.c548a5bc.js"><link rel="prefetch" href="/assets/js/101.ed73cad9.js"><link rel="prefetch" href="/assets/js/102.3782e5a1.js"><link rel="prefetch" href="/assets/js/103.1ca6979e.js"><link rel="prefetch" href="/assets/js/104.ee2bb9a7.js"><link rel="prefetch" href="/assets/js/105.f090c0dd.js"><link rel="prefetch" href="/assets/js/106.afd16ef4.js"><link rel="prefetch" href="/assets/js/107.c284f647.js"><link rel="prefetch" href="/assets/js/108.ebd45b61.js"><link rel="prefetch" href="/assets/js/109.51bfd683.js"><link rel="prefetch" href="/assets/js/11.b98e3149.js"><link rel="prefetch" href="/assets/js/110.954dd4ce.js"><link rel="prefetch" href="/assets/js/111.56be758a.js"><link rel="prefetch" href="/assets/js/112.10854013.js"><link rel="prefetch" href="/assets/js/113.ea7eaec2.js"><link rel="prefetch" href="/assets/js/114.3ec0155a.js"><link rel="prefetch" href="/assets/js/115.e8fffb0b.js"><link rel="prefetch" href="/assets/js/116.665f2f5f.js"><link rel="prefetch" href="/assets/js/117.3c44ff38.js"><link rel="prefetch" href="/assets/js/118.5ebf8dd6.js"><link rel="prefetch" href="/assets/js/119.3a6a18cc.js"><link rel="prefetch" href="/assets/js/12.36f4b56f.js"><link rel="prefetch" href="/assets/js/120.b30dddae.js"><link rel="prefetch" href="/assets/js/121.da4afc88.js"><link rel="prefetch" href="/assets/js/122.aedf44d9.js"><link rel="prefetch" href="/assets/js/123.368bbd05.js"><link rel="prefetch" href="/assets/js/124.63f90b92.js"><link rel="prefetch" href="/assets/js/125.88747637.js"><link rel="prefetch" href="/assets/js/126.103ab4ca.js"><link rel="prefetch" href="/assets/js/127.ea0ae6dd.js"><link rel="prefetch" href="/assets/js/128.25b152a0.js"><link rel="prefetch" href="/assets/js/129.9d56c23c.js"><link rel="prefetch" href="/assets/js/13.7f953f44.js"><link rel="prefetch" href="/assets/js/130.d9ea4c61.js"><link rel="prefetch" href="/assets/js/131.8f500f70.js"><link rel="prefetch" href="/assets/js/132.6dddf3ee.js"><link rel="prefetch" href="/assets/js/133.bab89f12.js"><link rel="prefetch" href="/assets/js/134.e3c2e54c.js"><link rel="prefetch" href="/assets/js/135.f6c0e445.js"><link rel="prefetch" href="/assets/js/136.bb2c3759.js"><link rel="prefetch" href="/assets/js/137.a937d6cb.js"><link rel="prefetch" href="/assets/js/138.89101b18.js"><link rel="prefetch" href="/assets/js/139.ee6aa01e.js"><link rel="prefetch" href="/assets/js/14.079331ab.js"><link rel="prefetch" href="/assets/js/140.4ba0e57e.js"><link rel="prefetch" href="/assets/js/141.bdd91226.js"><link rel="prefetch" href="/assets/js/142.5cf3a201.js"><link rel="prefetch" href="/assets/js/143.dc86f11b.js"><link rel="prefetch" href="/assets/js/145.d9f36f4e.js"><link rel="prefetch" href="/assets/js/146.ebc2a989.js"><link rel="prefetch" href="/assets/js/147.c1ca7cf1.js"><link rel="prefetch" href="/assets/js/148.68e8b69b.js"><link rel="prefetch" href="/assets/js/149.e8b58c10.js"><link rel="prefetch" href="/assets/js/15.d62dbd06.js"><link rel="prefetch" href="/assets/js/150.69a620e3.js"><link rel="prefetch" href="/assets/js/151.6138e481.js"><link rel="prefetch" href="/assets/js/152.1738b7c7.js"><link rel="prefetch" href="/assets/js/153.8c107190.js"><link rel="prefetch" href="/assets/js/154.299688e6.js"><link rel="prefetch" href="/assets/js/155.aa45df91.js"><link rel="prefetch" href="/assets/js/156.2472b696.js"><link rel="prefetch" href="/assets/js/157.1dabf491.js"><link rel="prefetch" href="/assets/js/158.873610de.js"><link rel="prefetch" href="/assets/js/159.627e60ca.js"><link rel="prefetch" href="/assets/js/16.12e5018b.js"><link rel="prefetch" href="/assets/js/160.3bcbc64e.js"><link rel="prefetch" href="/assets/js/161.00593262.js"><link rel="prefetch" href="/assets/js/162.962f49d6.js"><link rel="prefetch" href="/assets/js/163.0b788e1d.js"><link rel="prefetch" href="/assets/js/164.ea83bce1.js"><link rel="prefetch" href="/assets/js/165.e512cbf5.js"><link rel="prefetch" href="/assets/js/166.8c7cdf43.js"><link rel="prefetch" href="/assets/js/167.1bafda9e.js"><link rel="prefetch" href="/assets/js/168.5a94d116.js"><link rel="prefetch" href="/assets/js/169.cb425b09.js"><link rel="prefetch" href="/assets/js/17.2e11af7c.js"><link rel="prefetch" href="/assets/js/170.f0141120.js"><link rel="prefetch" href="/assets/js/171.8a0e220e.js"><link rel="prefetch" href="/assets/js/18.7546cc5b.js"><link rel="prefetch" href="/assets/js/19.3e9642b6.js"><link rel="prefetch" href="/assets/js/20.3ba82c2f.js"><link rel="prefetch" href="/assets/js/21.84316a24.js"><link rel="prefetch" href="/assets/js/22.e0a04af0.js"><link rel="prefetch" href="/assets/js/23.f62d598e.js"><link rel="prefetch" href="/assets/js/24.a0465d4d.js"><link rel="prefetch" href="/assets/js/25.ba37b866.js"><link rel="prefetch" href="/assets/js/26.76674591.js"><link rel="prefetch" href="/assets/js/27.97c23916.js"><link rel="prefetch" href="/assets/js/28.e6d39649.js"><link rel="prefetch" href="/assets/js/29.86525c82.js"><link rel="prefetch" href="/assets/js/3.09b2d87c.js"><link rel="prefetch" href="/assets/js/30.30a96ddf.js"><link rel="prefetch" href="/assets/js/31.d6ad5f12.js"><link rel="prefetch" href="/assets/js/32.2427006f.js"><link rel="prefetch" href="/assets/js/33.523587cf.js"><link rel="prefetch" href="/assets/js/34.b1278f31.js"><link rel="prefetch" href="/assets/js/35.55711bd0.js"><link rel="prefetch" href="/assets/js/36.3922289a.js"><link rel="prefetch" href="/assets/js/37.dd1cc712.js"><link rel="prefetch" href="/assets/js/38.7905c17a.js"><link rel="prefetch" href="/assets/js/39.5d09d9d6.js"><link rel="prefetch" href="/assets/js/4.a15be3f4.js"><link rel="prefetch" href="/assets/js/40.4a3ff39e.js"><link rel="prefetch" href="/assets/js/41.d381858a.js"><link rel="prefetch" href="/assets/js/42.ba050135.js"><link rel="prefetch" href="/assets/js/43.9dd61886.js"><link rel="prefetch" href="/assets/js/44.6097dae8.js"><link rel="prefetch" href="/assets/js/45.70d0e903.js"><link rel="prefetch" href="/assets/js/46.267a3373.js"><link rel="prefetch" href="/assets/js/47.c0284021.js"><link rel="prefetch" href="/assets/js/48.6bc06859.js"><link rel="prefetch" href="/assets/js/49.ae3f3546.js"><link rel="prefetch" href="/assets/js/50.0b500d94.js"><link rel="prefetch" href="/assets/js/51.f0c8aaa5.js"><link rel="prefetch" href="/assets/js/52.24ed79b5.js"><link rel="prefetch" href="/assets/js/53.d8b0412d.js"><link rel="prefetch" href="/assets/js/54.c9211ac0.js"><link rel="prefetch" href="/assets/js/55.a7606753.js"><link rel="prefetch" href="/assets/js/56.1642d983.js"><link rel="prefetch" href="/assets/js/57.9aa188e7.js"><link rel="prefetch" href="/assets/js/58.7eb7c1c2.js"><link rel="prefetch" href="/assets/js/59.bd13154e.js"><link rel="prefetch" href="/assets/js/6.5abba44a.js"><link rel="prefetch" href="/assets/js/60.694f2ffc.js"><link rel="prefetch" href="/assets/js/61.4fbf7b9e.js"><link rel="prefetch" href="/assets/js/62.5141679e.js"><link rel="prefetch" href="/assets/js/63.391f878e.js"><link rel="prefetch" href="/assets/js/64.039409df.js"><link rel="prefetch" href="/assets/js/65.9d19d5b1.js"><link rel="prefetch" href="/assets/js/66.5333487c.js"><link rel="prefetch" href="/assets/js/67.4cc235bd.js"><link rel="prefetch" href="/assets/js/68.fe55d09c.js"><link rel="prefetch" href="/assets/js/69.59393955.js"><link rel="prefetch" href="/assets/js/7.7df7f8d6.js"><link rel="prefetch" href="/assets/js/70.b6a61f83.js"><link rel="prefetch" href="/assets/js/71.81fafa30.js"><link rel="prefetch" href="/assets/js/72.62c4b4fa.js"><link rel="prefetch" href="/assets/js/73.76a8c1f4.js"><link rel="prefetch" href="/assets/js/74.71178a2e.js"><link rel="prefetch" href="/assets/js/75.33012e0b.js"><link rel="prefetch" href="/assets/js/76.35561a7a.js"><link rel="prefetch" href="/assets/js/77.5ec444ac.js"><link rel="prefetch" href="/assets/js/78.d7902207.js"><link rel="prefetch" href="/assets/js/79.f7a0489e.js"><link rel="prefetch" href="/assets/js/8.bd6eaa3f.js"><link rel="prefetch" href="/assets/js/80.e02127a6.js"><link rel="prefetch" href="/assets/js/81.01d2b539.js"><link rel="prefetch" href="/assets/js/82.ae9dd204.js"><link rel="prefetch" href="/assets/js/83.35b08877.js"><link rel="prefetch" href="/assets/js/84.60bf2230.js"><link rel="prefetch" href="/assets/js/85.195577c5.js"><link rel="prefetch" href="/assets/js/86.e8d54700.js"><link rel="prefetch" href="/assets/js/87.5cae5597.js"><link rel="prefetch" href="/assets/js/88.ba0e64c1.js"><link rel="prefetch" href="/assets/js/89.8375458d.js"><link rel="prefetch" href="/assets/js/9.b1d341fe.js"><link rel="prefetch" href="/assets/js/90.87c59b9e.js"><link rel="prefetch" href="/assets/js/91.628fb020.js"><link rel="prefetch" href="/assets/js/92.5d054e33.js"><link rel="prefetch" href="/assets/js/93.38992b86.js"><link rel="prefetch" href="/assets/js/94.54cca142.js"><link rel="prefetch" href="/assets/js/95.d722e344.js"><link rel="prefetch" href="/assets/js/96.cce6941f.js"><link rel="prefetch" href="/assets/js/97.6461b059.js"><link rel="prefetch" href="/assets/js/98.e62a9ee2.js"><link rel="prefetch" href="/assets/js/99.da45df71.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1e12fa23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="åç«¯å­¦ä¹ åˆ†äº«" class="logo"> <span class="site-name can-hide">åç«¯å­¦ä¹ åˆ†äº«</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/home/" class="nav-link router-link-active">é¦–é¡µ</a></div><div class="nav-item"><a href="/home/backendtechnology/database/1_mysql.html" class="nav-link">å­¦ä¹ æ€»ç»“</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">é“¾æ¥</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/XiaomingWangX" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/samxwang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/XiaomingWangX/vueBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    è´¡çŒ®ä»£ç ï¼
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/home/" class="nav-link router-link-active">é¦–é¡µ</a></div><div class="nav-item"><a href="/home/backendtechnology/database/1_mysql.html" class="nav-link">å­¦ä¹ æ€»ç»“</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">é“¾æ¥</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/XiaomingWangX" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/samxwang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç äº‘
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/XiaomingWangX/vueBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    è´¡çŒ®ä»£ç ï¼
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/home/" class="sidebar-heading clickable router-link-active open"><span>åç«¯æ ˆ</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/database/" class="sidebar-heading clickable open"><span>æ•°æ®åº“</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/home/backendtechnology/database/1_mysql.html" class="sidebar-link">mysql</a></li><li><a href="/home/backendtechnology/database/2_dataoptimization.html" class="sidebar-link">Mybatis æ’å…¥æ•°æ®ä¼˜åŒ–</a></li><li><a href="/home/backendtechnology/database/3_index.html" class="sidebar-link">Mysqlæ•°æ®åº“ç´¢å¼•åŸç†</a></li><li><a href="/home/backendtechnology/database/4_xingneng.html" class="sidebar-link">æ…¢æŸ¥è¯¢</a></li><li><a href="/home/backendtechnology/database/5_youhua.html" class="sidebar-link">æ•°æ®åº“ä¼˜åŒ–</a></li><li><a href="/home/backendtechnology/database/5_transaction.html" class="sidebar-link">äº‹åŠ¡</a></li><li><a href="/home/backendtechnology/database/6_mycat.html" class="sidebar-link">mycat</a></li><li><a href="/home/backendtechnology/database/7_shardingsphere.html" class="sidebar-link">shardingSphere</a></li><li><a href="/home/backendtechnology/database/8_shardingsphere_project.html" class="sidebar-link">shardingSphere-jdbcæ•´åˆè‡ªå·±çš„é¡¹ç›®</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/basic/" class="sidebar-heading clickable"><span>æ“ä½œç³»ç»Ÿ</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/jvm/" class="sidebar-heading clickable"><span>JVM</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/microservice/" class="sidebar-heading clickable"><span>å¾®æœåŠ¡</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/redis/" class="sidebar-heading clickable"><span>redis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/network/" class="sidebar-heading clickable"><span>ç½‘ç»œ</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/spring/" class="sidebar-heading clickable"><span>Spring</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/current/" class="sidebar-heading clickable"><span>å¹¶å‘ç¼–ç¨‹</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/es/" class="sidebar-heading clickable"><span>es</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/mq/" class="sidebar-heading clickable"><span>mq</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/deploy/" class="sidebar-heading clickable"><span>éƒ¨ç½²</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/deploy/deployplatform/" class="sidebar-heading clickable"><span>å¹³å°å³æœåŠ¡</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/deploy/dockerinstall/" class="sidebar-heading clickable"><span>Dockerå®‰è£…</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/design/" class="sidebar-heading clickable"><span>è®¾è®¡æ¨¡å¼</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/datastructure/" class="sidebar-heading clickable"><span>æ•°æ®ç»“æ„ç®—æ³•</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/home/backendtechnology/video/" class="sidebar-heading clickable"><span>æµåª’ä½“</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/home/" class="sidebar-heading clickable router-link-active"><span>è¿ç»´ç­‰æ‹“å±•</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h2> <ul><li>å°†Javaæ–‡ä»¶ç¼–è¯‘æˆ<code>.class</code> æ–‡ä»¶</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>javac xxx.java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç¼–è¯‘åçš„æ–‡ä»¶</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>æ¼±å£•   <span class="token number">4</span> 
  
 
   <span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">V</span> <span class="token class-name">Code</span> <span class="token class-name">LineNumberTable</span> math <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">I</span> main <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span> 
<span class="token class-name">SourceFile</span> 
<span class="token class-name">Demo1</span><span class="token punctuation">.</span>java   com<span class="token operator">/</span>xiangxue<span class="token operator">/</span>spring<span class="token operator">/</span>cap1<span class="token operator">/</span><span class="token class-name">Demo1</span> 
 java<span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Object</span> <span class="token operator">!</span>                    <span class="token operator">*</span><span class="token operator">?</span><span class="token operator">?</span>   	         
     <span class="token number">1</span>     
<span class="token operator">&lt;</span><span class="token operator">=</span>`
h<span class="token operator">&gt;</span><span class="token operator">?</span>   	              	  
    <span class="token punctuation">.</span>     <span class="token operator">?</span><span class="token class-name">Y</span><span class="token operator">?</span><span class="token class-name">L</span><span class="token operator">+</span><span class="token operator">?</span><span class="token class-name">W</span><span class="token operator">?</span>   	         

        	  	 		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><code>.class</code> æ–‡ä»¶ ç¼–è¯‘æˆ æŒ‡ä»¤æ–‡ä»¶ javap -c xxx.class &gt; xxx.txt
ç¼–è¯‘åçš„æ–‡ä»¶</li></ul> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>Compiled from &quot;Demo1.java&quot;
public class com.xiangxue.spring.cap1.Demo1 {
 public com.xiangxue.spring.cap1.Demo1();
   Code:
      0: aload_0
      1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V
      4: return

 public int math();
   Code:
      0: iconst_1 //å°†ç¬¬ä¸€ä¸ªint ç±»å‹çš„å€¼æ”¾å…¥æ ˆé¡¶
      1: istore_1 // å°†ç¬¬ä¸€ä¸ªint ç±»å‹çš„å€¼ æ”¾åˆ° å±€éƒ¨å˜é‡è¡¨ã€‚ç›¸å½“äºå½“å‰å€¼åœ¨æ ˆé¡¶çš„å€¼å‰ªè´´åˆ° å±€éƒ¨å˜é‡è¡¨
      2: iconst_2 //å°†ç¬¬äºŒä¸ªint ç±»å‹çš„å€¼æ”¾å…¥æ ˆé¡¶
      3: istore_2 // å°†ç¬¬äºŒä¸ªint ç±»å‹çš„å€¼ æ”¾åˆ° å±€éƒ¨å˜é‡è¡¨ã€‚ç›¸å½“äºå½“å‰å€¼åœ¨æ ˆé¡¶çš„å€¼å‰ªè´´åˆ° å±€éƒ¨å˜é‡è¡¨
      4: iload_1 // å°† ç¬¬ä¸€ä¸ªintç±»å‹çš„å€¼ä» å±€éƒ¨å˜é‡è¡¨å¤åˆ¶åˆ° æ“ä½œæ•°æ ˆæ ˆé¡¶ å‹æ ˆ
      5: iload_2
      6: iadd   //  å» cpuä¸­æ‰§è¡Œ
      7: bipush        10
      9: imul
     10: istore_3
     11: iload_3
     12: ireturn   // å°†å€¼è¿”å›

 public static void main(java.lang.String[]);
   Code:
      0: new           #2                  // class com/xiangxue/spring/cap1/Demo1
      3: dup
      4: invokespecial #3                  // Method &quot;&lt;init&gt;&quot;:()V
      7: astore_1
      8: aload_1
      9: invokevirtual #4                  // Method math:()I
     12: pop
     13: return
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>å…·ä½“çš„æŒ‡ä»¤åˆ†æå¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/d64a5dcccaa5" target="_blank" rel="noopener noreferrer">æŒ‡ä»¤é›†<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
å…·ä½“çš„æŒ‡ä»¤å°±ä¸åˆ†æäº†ï¼Œ  è¿‡ç¨‹å°±æ˜¯å°† æ•°æ¨é€è‡³æ ˆé¡¶ï¼Œ</p> <ul><li>å¯¼å‡ºdumpæ–‡ä»¶
è¿™é‡Œæ˜¯é’ˆå¯¹ å†…å­˜æº¢å‡ºé”™è¯¯ï¼Œå¯ä»¥ä¸å†™ <code>-XX:+HeapDumpOnOutOfMemoryError</code></li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>-Xms10m
-Xmx10m
-XX:+PrintGCDetails
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath<span class="token operator">=</span>D:<span class="token punctuation">\</span>outdump.dump
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>jps æŸ¥çœ‹è¿›ç¨‹pid</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">5584</span>
<span class="token number">11668</span> Launcher
<span class="token number">12408</span>
<span class="token number">20248</span> Main
<span class="token number">1420</span> Jps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>jstack pid   æŸ¥çœ‹æ ˆä¿¡æ¯</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">2019</span>-09-02 <span class="token number">20</span>:25:32
Full thread dump OpenJDK <span class="token number">64</span>-Bit Server VM <span class="token punctuation">(</span><span class="token number">25.202</span>-b49 mixed mode<span class="token punctuation">)</span>:

<span class="token string">&quot;JobScheduler FJ pool 5/7&quot;</span> <span class="token comment">#773 daemon prio=4 os_prio=-1 tid=0x000000001df81800 nid=0x3da4 waiting on condition [0x000000006db0f000]</span>
   java.lang.Thread.State: TIMED_WAITING <span class="token punctuation">(</span>parking<span class="token punctuation">)</span>
	at sun.misc.Unsafe.park<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
	- parking to <span class="token function">wait</span> <span class="token keyword">for</span>  <span class="token operator">&lt;</span>0x000000074a292b0<span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> <span class="token punctuation">(</span>a java.util.concurrent.ForkJoinPool<span class="token punctuation">)</span>
	at java.util.concurrent.ForkJoinPool.awaitWork<span class="token punctuation">(</span>ForkJoinPool.java:1824<span class="token punctuation">)</span>
	at java.util.concurrent.ForkJoinPool.runWorker<span class="token punctuation">(</span>ForkJoinPool.java:1693<span class="token punctuation">)</span>
	at java.util.concurrent.ForkJoinWorkerThread.run<span class="token punctuation">(</span>ForkJoinWorkerThread.java:157<span class="token punctuation">)</span>

<span class="token string">&quot;Process I/O pool 60&quot;</span> <span class="token comment">#770 daemon prio=4 os_prio=-1 tid=0x000000001df89800 nid=0x489c waiting on condition [0x000000006d20f000]</span>
   java.lang.Thread.State: TIMED_WAITING <span class="token punctuation">(</span>parking<span class="token punctuation">)</span>
	at sun.misc.Unsafe.park<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
	- parking to <span class="token function">wait</span> <span class="token keyword">for</span>  <span class="token operator">&lt;</span>0x000000074b0c722<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> <span class="token punctuation">(</span>a java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span><span class="token punctuation">)</span>
	at java.util.concurrent.locks.LockSupport.parkNanos<span class="token punctuation">(</span>LockSupport.java:215<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span>.awaitFulfill<span class="token punctuation">(</span>SynchronousQueue.java:460<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span>.transfer<span class="token punctuation">(</span>SynchronousQueue.java:362<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue.poll<span class="token punctuation">(</span>SynchronousQueue.java:941<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor.getTask<span class="token punctuation">(</span>ThreadPoolExecutor.java:1073<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor.runWorker<span class="token punctuation">(</span>ThreadPoolExecutor.java:1134<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor<span class="token variable">$Worker</span>.run<span class="token punctuation">(</span>ThreadPoolExecutor.java:624<span class="token punctuation">)</span>
	at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:748<span class="token punctuation">)</span>

<span class="token string">&quot;Process I/O pool 59&quot;</span> <span class="token comment">#769 daemon prio=4 os_prio=-1 tid=0x000000001df86800 nid=0x4854 waiting on condition [0x000000006d10f000]</span>
   java.lang.Thread.State: TIMED_WAITING <span class="token punctuation">(</span>parking<span class="token punctuation">)</span>
	at sun.misc.Unsafe.park<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
	- parking to <span class="token function">wait</span> <span class="token keyword">for</span>  <span class="token operator">&lt;</span>0x000000074b0c722<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> <span class="token punctuation">(</span>a java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span><span class="token punctuation">)</span>
	at java.util.concurrent.locks.LockSupport.parkNanos<span class="token punctuation">(</span>LockSupport.java:215<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span>.awaitFulfill<span class="token punctuation">(</span>SynchronousQueue.java:460<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span>.transfer<span class="token punctuation">(</span>SynchronousQueue.java:362<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue.poll<span class="token punctuation">(</span>SynchronousQueue.java:941<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor.getTask<span class="token punctuation">(</span>ThreadPoolExecutor.java:1073<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor.runWorker<span class="token punctuation">(</span>ThreadPoolExecutor.java:1134<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor<span class="token variable">$Worker</span>.run<span class="token punctuation">(</span>ThreadPoolExecutor.java:624<span class="token punctuation">)</span>
	at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:748<span class="token punctuation">)</span>

<span class="token string">&quot;Process I/O pool 58&quot;</span> <span class="token comment">#768 daemon prio=4 os_prio=-1 tid=0x000000001df87800 nid=0x2cf8 waiting on condition [0x000000006d00f000]</span>
   java.lang.Thread.State: TIMED_WAITING <span class="token punctuation">(</span>parking<span class="token punctuation">)</span>
	at sun.misc.Unsafe.park<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
	- parking to <span class="token function">wait</span> <span class="token keyword">for</span>  <span class="token operator">&lt;</span>0x000000074b0c722<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> <span class="token punctuation">(</span>a java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span><span class="token punctuation">)</span>
	at java.util.concurrent.locks.LockSupport.parkNanos<span class="token punctuation">(</span>LockSupport.java:215<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span>.awaitFulfill<span class="token punctuation">(</span>SynchronousQueue.java:460<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue<span class="token variable">$TransferStack</span>.transfer<span class="token punctuation">(</span>SynchronousQueue.java:362<span class="token punctuation">)</span>
	at java.util.concurrent.SynchronousQueue.poll<span class="token punctuation">(</span>SynchronousQueue.java:941<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor.getTask<span class="token punctuation">(</span>ThreadPoolExecutor.java:1073<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor.runWorker<span class="token punctuation">(</span>ThreadPoolExecutor.java:1134<span class="token punctuation">)</span>
	at java.util.concurrent.ThreadPoolExecutor<span class="token variable">$Worker</span>.run<span class="token punctuation">(</span>ThreadPoolExecutor.java:624<span class="token punctuation">)</span>
	at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:748<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><ul><li>ä½¿ç”¨Java VisualVM åœ¨jdkçš„ libç›®å½•ä¸‹ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨cmd å‘½ä»¤ä¸‹çš„ï¼š</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>jvisualvm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="visualvm-å®‰è£…gcæ’ä»¶">VisualVM å®‰è£…GCæ’ä»¶</h4> <p>1.å…ˆå»æ’ä»¶ä¸­å¿ƒä¸‹è½½è‡ªå·±JDKå¯¹åº”çš„æ’ä»¶ç‰ˆæœ¬ <a href="https://visualvm.github.io/pluginscenters.html" target="_blank" rel="noopener noreferrer">å®˜ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <img src="/img/interviewtopic/jvm.jpg" alt="jvm">
2.ç‚¹å‡»è¿›å…¥ä¸‹è½½è‡ªå·±æ‰€éœ€è¦çš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼šgcæ’ä»¶ com-sun-tools-visualvm-modules-visualgc_1.nbm
3.æ‰“å¼€Java JvisualVM-å·¥å…·-æ’ä»¶-å·²ä¸‹è½½-æ·»åŠ æ’ä»¶ï¼Œé€‰æ‹©å·²ä¸‹è½½çš„æ’ä»¶å®‰è£…å³å¯</p> <h3 id="å‘½ä»¤æ€»ç»“">å‘½ä»¤æ€»ç»“</h3> <ul><li>jinfo:å¯ä»¥è¾“å‡ºå¹¶ä¿®æ”¹è¿è¡Œæ—¶çš„java è¿›ç¨‹çš„optsã€‚</li> <li>jps:ä¸unixä¸Šçš„psç±»ä¼¼ï¼Œç”¨æ¥æ˜¾ç¤ºæœ¬åœ°çš„javaè¿›ç¨‹ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬åœ°è¿è¡Œç€å‡ ä¸ªjavaç¨‹åºï¼Œå¹¶æ˜¾ç¤ºä»–ä»¬çš„è¿›ç¨‹å·ã€‚</li> <li>jstat:ä¸€ä¸ªæå¼ºçš„ç›‘è§†VMå†…å­˜å·¥å…·ã€‚å¯ä»¥ç”¨æ¥ç›‘è§†VMå†…å­˜å†…çš„å„ç§å †å’Œéå †çš„å¤§å°åŠå…¶å†…å­˜ä½¿ç”¨é‡ã€‚</li> <li>j:æ‰“å°å‡ºæŸä¸ªjavaè¿›ç¨‹ï¼ˆä½¿ç”¨pidï¼‰å†…å­˜å†…çš„æ‰€æœ‰'å¯¹è±¡'çš„æƒ…å†µï¼ˆå¦‚ï¼šäº§ç”Ÿé‚£äº›å¯¹è±¡ï¼ŒåŠå…¶æ•°é‡ï¼‰ã€‚</li> <li>jconsole:ä¸€ä¸ªjava GUIç›‘è§†å·¥å…·ï¼Œå¯ä»¥ä»¥å›¾è¡¨åŒ–çš„å½¢å¼æ˜¾ç¤ºå„ç§æ•°æ®ã€‚å¹¶å¯é€šè¿‡è¿œç¨‹è¿æ¥ç›‘è§†è¿œç¨‹çš„æœåŠ¡å™¨VMã€‚</li></ul> <p>è¯¦ç»†ï¼šåœ¨ä½¿ç”¨è¿™äº›å·¥å…·å‰ï¼Œå…ˆç”¨JPSå‘½ä»¤è·å–å½“å‰çš„æ¯ä¸ªJVMè¿›ç¨‹å·ï¼Œç„¶åé€‰æ‹©è¦æŸ¥çœ‹çš„JVMã€‚</p> <hr> <ul><li>jstatå·¥å…·ç‰¹åˆ«å¼ºå¤§ï¼Œæœ‰ä¼—å¤šçš„å¯é€‰é¡¹ï¼Œè¯¦ç»†æŸ¥çœ‹å †å†…å„ä¸ªéƒ¨åˆ†çš„ä½¿ç”¨é‡ï¼Œä»¥åŠåŠ è½½ç±»çš„æ•°é‡ã€‚ä½¿ç”¨æ—¶ï¼Œéœ€åŠ ä¸ŠæŸ¥çœ‹è¿›ç¨‹çš„è¿›ç¨‹idï¼Œå’Œæ‰€é€‰å‚æ•°ã€‚ä»¥ä¸‹è¯¦ç»†ä»‹ç»å„ä¸ªå‚æ•°çš„æ„ä¹‰ã€‚</li> <li>jstat -class pid:æ˜¾ç¤ºåŠ è½½classçš„æ•°é‡ï¼ŒåŠæ‰€å ç©ºé—´ç­‰ä¿¡æ¯ã€‚</li> <li>jstat -compiler pid:æ˜¾ç¤ºVMå®æ—¶ç¼–è¯‘çš„æ•°é‡ç­‰ä¿¡æ¯ã€‚</li> <li>jstat -gc pid:å¯ä»¥æ˜¾ç¤ºgcçš„ä¿¡æ¯ï¼ŒæŸ¥çœ‹gcçš„æ¬¡æ•°ï¼ŒåŠæ—¶é—´ã€‚å…¶ä¸­æœ€åäº”é¡¹ï¼Œåˆ†åˆ«æ˜¯young gcçš„æ¬¡æ•°ï¼Œyoung gcçš„æ—¶é—´ï¼Œfull gcçš„æ¬¡æ•°ï¼Œfull gcçš„æ—¶é—´ï¼Œgcçš„æ€»æ—¶é—´ã€‚</li> <li>jstat -gccapacity:å¯ä»¥æ˜¾ç¤ºï¼ŒVMå†…å­˜ä¸­ä¸‰ä»£ï¼ˆyoung,old,permï¼‰å¯¹è±¡çš„ä½¿ç”¨å’Œå ç”¨å¤§å°ï¼Œå¦‚ï¼šPGCMNæ˜¾ç¤ºçš„æ˜¯æœ€å°permçš„å†…å­˜ä½¿ç”¨é‡ï¼ŒPGCMXæ˜¾ç¤ºçš„æ˜¯permçš„å†…å­˜æœ€å¤§ä½¿ç”¨é‡ï¼ŒPGCæ˜¯å½“å‰æ–°ç”Ÿæˆçš„permå†…å­˜å ç”¨é‡ï¼ŒPCæ˜¯ä½†å‰permå†…å­˜å ç”¨é‡ã€‚å…¶ä»–çš„å¯ä»¥æ ¹æ®è¿™ä¸ªç±»æ¨ï¼Œ OCæ˜¯oldå†…çº¯çš„å ç”¨é‡ã€‚</li> <li>jstat -gcnew pid:newå¯¹è±¡çš„ä¿¡æ¯ã€‚</li> <li>jstat -gcnewcapacity pid:newå¯¹è±¡çš„ä¿¡æ¯åŠå…¶å ç”¨é‡ã€‚</li> <li>jstat -gcold pid:oldå¯¹è±¡çš„ä¿¡æ¯ã€‚</li> <li>jstat -gcoldcapacity pid:oldå¯¹è±¡çš„ä¿¡æ¯åŠå…¶å ç”¨é‡ã€‚</li> <li>jstat -gcpermcapacity pid: permå¯¹è±¡çš„ä¿¡æ¯åŠå…¶å ç”¨é‡ã€‚</li> <li>jstat -util pid:ç»Ÿè®¡gcä¿¡æ¯ç»Ÿè®¡ã€‚</li> <li>jstat -printcompilation pid:å½“å‰VMæ‰§è¡Œçš„ä¿¡æ¯ã€‚
é™¤äº†ä»¥ä¸Šä¸€ä¸ªå‚æ•°å¤–ï¼Œè¿˜å¯ä»¥åŒæ—¶åŠ ä¸Š ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚ï¼šjstat -printcompilation 3024 250 6æ˜¯æ¯250æ¯«ç§’æ‰“å°ä¸€æ¬¡ï¼Œä¸€å…±æ‰“å°6æ¬¡ï¼Œè¿˜å¯ä»¥åŠ ä¸Š-h3æ¯ä¸‰è¡Œæ˜¾ç¤ºä¸€ä¸‹æ ‡é¢˜ã€‚</li></ul> <p>jmapæ˜¯ä¸€ä¸ªå¯ä»¥è¾“å‡ºæ‰€æœ‰å†…å­˜ä¸­å¯¹è±¡çš„å·¥å…·ï¼Œç”šè‡³å¯ä»¥å°†VM ä¸­çš„heapï¼Œä»¥äºŒè¿›åˆ¶è¾“å‡ºæˆæ–‡æœ¬ã€‚
å‘½ä»¤ï¼šjmap -dump:format=b,file=heap.bin pid
fileï¼šä¿å­˜è·¯å¾„åŠæ–‡ä»¶å
pidï¼šè¿›ç¨‹ç¼–å·
jmap -histo:live  pid| less :å †ä¸­æ´»åŠ¨çš„å¯¹è±¡ä»¥åŠå¤§å°
jmap -heap pid : æŸ¥çœ‹å †çš„ä½¿ç”¨çŠ¶å†µä¿¡æ¯</p> <h2 id="jvmå†…å­˜æ¨¡å‹">JVMå†…å­˜æ¨¡å‹</h2> <ul><li>å…ˆçœ‹ä¸€ä¸‹jvmå†…å­˜æ¨¡å‹ï¼Œåˆ†ä¸º å †ã€æ–¹æ³•åŒºã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨</li></ul> <h4 id="æ€»ä½“å†…å­˜æ¨¡å‹">æ€»ä½“å†…å­˜æ¨¡å‹</h4> <p><img src="/img/interviewtopic/jvm10.png" alt="jvm"></p> <p>æ©™è‰²çš„éƒ¨åˆ†æ˜¯å…±äº«çš„ï¼Œ è“è‰²çš„éƒ¨åˆ†æ˜¯ç§æœ‰çš„</p> <ul><li><strong>æ–¹æ³•åŒº</strong> å®ƒç”¨äºå­˜å‚¨è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€æ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸã€‚</li> <li><strong>è™šæ‹Ÿæœºæ ˆ(JVM Stack)</strong> æè¿°çš„æ˜¯javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ª&quot;æ ˆå¸§&quot;,ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨(åŒ…æ‹¬å‚æ•°)ã€æ“ä½œæ ˆã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸ªæ–¹æ³•è¢«è°ƒç”¨åˆ°æ‰§è¡Œå®Œçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</li> <li><strong>æœ¬åœ°æ–¹æ³•æ ˆ(Native Stack)</strong> æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰ä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«ä¸è¿‡æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚</li> <li><strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰</strong>  ç¨‹åºè®¡æ•°å™¨æ˜¯ç”¨äºæ ‡è¯†å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æ–‡ä»¶çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å…·æœ‰å„è‡ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œæ‰€ä»¥è¯¥åŒºåŸŸæ˜¯éçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸã€‚ å½“æ‰§è¡Œjavaæ–¹æ³•æ—¶å€™ï¼Œè®¡æ•°å™¨ä¸­ä¿å­˜çš„æ˜¯å­—èŠ‚ç æ–‡ä»¶çš„è¡Œå·ï¼›å½“æ‰§è¡ŒNativeæ–¹æ³•æ—¶ï¼Œè®¡æ•°å™¨çš„å€¼ä¸ºç©ºã€‚</li></ul> <h4 id="jvmå†…å­˜å‚æ•°è®¾ç½®">JVMå†…å­˜å‚æ•°è®¾ç½®</h4> <ul><li><p>-Xmsè®¾ç½®å †çš„æœ€å°ç©ºé—´å¤§å°ã€‚</p></li> <li><p>-Xmxè®¾ç½®å †çš„æœ€å¤§ç©ºé—´å¤§å°ã€‚</p></li> <li><p>-Xmn:è®¾ç½®å¹´è½»ä»£å¤§å°</p></li> <li><p>-XX:NewSizeè®¾ç½®æ–°ç”Ÿä»£æœ€å°ç©ºé—´å¤§å°ã€‚</p></li> <li><p>-XX:MaxNewSizeè®¾ç½®æ–°ç”Ÿä»£æœ€å¤§ç©ºé—´å¤§å°ã€‚</p></li> <li><p>-XX:PermSizeè®¾ç½®æ°¸ä¹…ä»£æœ€å°ç©ºé—´å¤§å°ã€‚</p></li> <li><p>-XX:MaxPermSizeè®¾ç½®æ°¸ä¹…ä»£æœ€å¤§ç©ºé—´å¤§å°ã€‚</p></li> <li><p>-Xssè®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°</p></li> <li><p>-XX:+UseParallelGC:é€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä¸ºå¹¶è¡Œæ”¶é›†å™¨ã€‚æ­¤é…ç½®ä»…å¯¹å¹´è½»ä»£æœ‰æ•ˆã€‚å³ä¸Šè¿°é…ç½®ä¸‹,å¹´è½»ä»£ä½¿ç”¨å¹¶å‘æ”¶é›†,è€Œå¹´è€ä»£ä»æ—§ä½¿ç”¨ä¸²è¡Œæ”¶é›†ã€‚</p></li> <li><p>-XX:ParallelGCThreads=20:é…ç½®å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°,å³:åŒæ—¶å¤šå°‘ä¸ªçº¿ç¨‹ä¸€èµ·è¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ­¤å€¼æœ€å¥½é…ç½®ä¸å¤„ç†å™¨æ•°ç›®ç›¸ç­‰ã€‚
å…¸å‹JVMå‚æ•°é…ç½®å‚è€ƒ:</p></li> <li><p>-Xmx3550m-Xms3550m-Xmn2g-Xss128k</p></li> <li><p>-XX:ParallelGCThreads=20</p></li> <li><p>-XX:+UseConcMarkSweepGC-XX:+UseParNewGC</p></li> <li><p>-Xmx3550m:è®¾ç½®JVMæœ€å¤§å¯ç”¨å†…å­˜ä¸º3550Mã€‚</p></li> <li><p>-Xms3550m:è®¾ç½®JVMä¿ƒä½¿å†…å­˜ä¸º3550mã€‚æ­¤å€¼å¯ä»¥è®¾ç½®ä¸-Xmxç›¸åŒ,ä»¥é¿å…æ¯æ¬¡åƒåœ¾å›æ”¶å®ŒæˆåJVMé‡æ–°åˆ†é…å†…å­˜ã€‚</p></li> <li><p>-Xmn2g:è®¾ç½®å¹´è½»ä»£å¤§å°ä¸º2Gã€‚æ•´ä¸ªå †å¤§å°=å¹´è½»ä»£å¤§å°+å¹´è€ä»£å¤§å°+æŒä¹…ä»£å¤§å°ã€‚æŒä¹…ä»£ä¸€èˆ¬å›ºå®šå¤§å°ä¸º64m,æ‰€ä»¥å¢å¤§å¹´è½»ä»£å,å°†ä¼šå‡å°å¹´è€ä»£å¤§å°ã€‚æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§,å®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„3/8ã€‚</p></li> <li><p>-Xss128k:è®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚JDK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º1M,ä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º256Kã€‚æ›´å…·åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§ å°è¿›è¡Œè°ƒæ•´ã€‚åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹,å‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„,ä¸èƒ½æ— é™ç”Ÿæˆ,ç»éªŒå€¼åœ¨3000~5000 å·¦å³ã€‚</p></li></ul> <h2 id="å †å†…å­˜æ¨¡å‹">å †å†…å­˜æ¨¡å‹</h2> <p><img src="/img/interviewtopic/jvm8.png" alt="jvm"></p> <ul><li>åˆ†ä¸ºEden åŒº from  ã€to ã€ old Memoryï¼ˆè€å¹´ä»£ï¼‰</li> <li>Eden : from : to = 8 : 1 : 1 ( å¯ä»¥é€šè¿‡å‚æ•° â€“XX:SurvivorRatio æ¥è®¾å®š )ï¼Œå³ï¼š Eden = 8/10 çš„æ–°ç”Ÿä»£ç©ºé—´å¤§å°ï¼Œfrom = to = 1/10 çš„æ–°ç”Ÿä»£ç©ºé—´å¤§å°ã€‚</li></ul> <div class="danger custom-block"><p>Eden åŒºä¼šé€šè¿‡MinorGC(YoungGC) å›æ”¶ Eden åŒºäº§ç”Ÿçš„åƒåœ¾ï¼Œå¦‚æœ æ²¡æœ‰å›æ”¶çš„åƒåœ¾å°†ä¼š è½¬ç§»åˆ° fromåŒºï¼Œ fromåŒº ä¹Ÿä¼šæ‰§è¡ŒMinorGC, å¦‚æœæ²¡æœ‰
æˆåŠŸå›æ”¶çš„åƒåœ¾å°†ä¼šè½¬è¯‘åˆ°to åŒºï¼Œ å¦‚æœtoåŒºæ‰§è¡ŒMinorGC, ä¹Ÿæ²¡æœ‰æˆåŠŸå›æ”¶é‚£ä¹ˆåƒåœ¾ä¼šé‡æ–°è¿”å›åˆ°fromåŒºï¼Œå¦‚æœè¿™ä¸ªåƒåœ¾åœ¨from åŒºåˆ°toåŒºå¾ªç¯15æ¬¡ä¹‹åè¿˜æ˜¯æ²¡æœ‰è¢«å›æ”¶
é‚£ä¹ˆ è¯¥åƒåœ¾å°†è¢«è½¬è¯‘åˆ° è€å¹´ä»£ï¼ˆoldï¼‰ï¼Œåœ¨è€å¹´ä»£ä¸­æ”¶é›†ç€éš¾ä»¥å›æ”¶çš„åƒåœ¾ï¼Œå’Œå¤§å¯¹è±¡ç­‰ç­‰ã€‚ è€å¹´ä»£æ‰§è¡Œçš„åƒåœ¾å›æ”¶å«åš MajorGC(Old GC)</p></div> <h2 id="æ ˆå†…å­˜æ¨¡å‹">æ ˆå†…å­˜æ¨¡å‹</h2> <p><img src="/img/interviewtopic/jvm9.png" alt="jvm"></p> <h2 id="åƒåœ¾å›æ”¶ç®—æ³•">åƒåœ¾å›æ”¶ç®—æ³•</h2> <h3 id="æ ‡è®°æ¸…é™¤ç®—æ³•">æ ‡è®°æ¸…é™¤ç®—æ³•</h3> <p><strong>å®šä¹‰</strong>ï¼šæ ‡è®°æ¸…é™¤ç®—æ³•é¡¾åæ€ä¹‰ï¼Œæ˜¯æŒ‡åœ¨è™šæ‹Ÿæœºæ‰§è¡Œåƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ï¼Œå…ˆé‡‡ç”¨æ ‡è®°ç®—æ³•ç¡®å®šå¯å›æ”¶å¯¹è±¡ï¼Œç„¶ååƒåœ¾æ”¶é›†å™¨æ ¹æ®æ ‡è¯†æ¸…é™¤ç›¸åº”çš„å†…å®¹ï¼Œç»™å †å†…å­˜è…¾å‡ºç›¸åº”çš„ç©ºé—´ã€‚</p> <p><strong>ç¼ºç‚¹</strong>ï¼šå®¹æ˜“äº§ç”Ÿå¤§é‡çš„å†…å­˜ç¢ç‰‡ï¼Œå¯èƒ½æ— æ³•æ»¡è¶³å¤§å¯¹è±¡çš„å†…å­˜åˆ†é…ï¼Œä¸€æ—¦å¯¼è‡´æ— æ³•åˆ†é…å¯¹è±¡ï¼Œé‚£å°±ä¼šå¯¼è‡´jvmå¯åŠ¨gcï¼Œä¸€æ—¦å¯åŠ¨gcï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°±ä¼šæš‚åœï¼Œè¿™å°±å¯¼è‡´åº”ç”¨çš„å“åº”é€Ÿåº¦å˜æ…¢ã€‚
<img src="/img/interviewtopic/jvm11.png" alt="jvm"></p> <h3 id="å¤åˆ¶ç®—æ³•">å¤åˆ¶ç®—æ³•</h3> <p><strong>å®šä¹‰</strong>ï¼šæŠŠå†…å­˜ç©ºé—´åˆ†æˆä¸¤ä¸ªç»´åº¦ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªç©ºé—´ã€‚å½“å¼€å§‹gcçš„æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šæŠŠç›¸åº”çš„åƒåœ¾æ¸…é™¤ï¼Œå‰©ä¸‹çš„å­˜æ´»å¯¹è±¡æŒ‰ç…§é¡ºåºæ’åˆ—å®Œæˆæ¸…ç†ã€‚</p> <p><strong>ç¼ºç‚¹</strong>ï¼šå¤åˆ¶ç®—æ³•æŠŠæœ‰ç”¨çš„ç©ºé—´å‹ç¼©äº†ä¸€åŠï¼Œå› ä¸ºæ¯æ¬¡åªèƒ½ä½¿ç”¨ä¸€åŠçš„ç©ºé—´ç”¨ä½œåˆ†é…ï¼Œå‰©ä¸‹çš„ç”¨ä½œgcåçš„åˆ†é…ã€‚
<img src="/img/interviewtopic/jvm12.png" alt="jvm"></p> <h3 id="æ ‡è®°-æ•´ç†ç®—æ³•">æ ‡è®°-æ•´ç†ç®—æ³•</h3> <p><strong>å®šä¹‰</strong>ï¼šæ ‡è®°æ•´ç†ç®—æ³•æ˜¯æ ‡è®°æ¸…é™¤çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œå½“åƒåœ¾æ”¶é›†å™¨æŠŠåƒåœ¾æ¸…é™¤åï¼Œä¸‹ä¸€æ­¥è¿˜ä¼šå¯¹å†…å­˜ç¢ç‰‡è¿›è¡Œæ•´ç†ï¼ŒæŠŠå­˜æ´»å¯¹è±¡ç»Ÿä¸€çš„æ•´ç†åˆ°ä¸€è¾¹ã€‚</p> <p><strong>ç¼ºç‚¹</strong>ï¼šè™½ç„¶ç®—æ³•å…å»äº†å†…å­˜ç¢ç‰‡çš„å‡ºç°å’ŒèŠ‚çœäº†ç©ºé—´ï¼Œä½†è¿™ç§ç®—æ³•éœ€è¦é¢‘ç¹çš„ç§»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šé€ æˆgcæ•ˆç‡çš„é™ä½ã€‚
<img src="/img/interviewtopic/jvm13.png" alt="jvm"></p> <h2 id="åƒåœ¾å›æ”¶å™¨">åƒåœ¾å›æ”¶å™¨</h2> <p>å›¾è§£HotSpotè™šæ‹Ÿæœºæ‰€åŒ…å«çš„æ”¶é›†å™¨ï¼š</p> <p><img src="/img/interviewtopic/jvm1.png" alt="jvm"></p> <p><strong>æ–°ç”Ÿä»£æ”¶é›†å™¨</strong>ï¼šSerialã€ParNewã€Parallel Scavenge</p> <p><strong>è€å¹´ä»£æ”¶é›†å™¨</strong>ï¼šCMSã€Serial Oldã€Parallel Old</p> <p><strong>æ•´å †æ”¶é›†å™¨</strong>ï¼š G1</p> <p>å‡ ä¸ªç›¸å…³æ¦‚å¿µï¼š
<strong>å¹¶è¡Œæ”¶é›†</strong>ï¼šæŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ä»å¤„äºç­‰å¾…çŠ¶æ€ã€‚</p> <p><strong>å¹¶å‘æ”¶é›†</strong>ï¼šæŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶å·¥ä½œï¼ˆä¸ä¸€å®šæ˜¯å¹¶è¡Œçš„å¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œï¼‰ã€‚ç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­è¿è¡Œï¼Œè€Œåƒåœ¾æ”¶é›†ç¨‹åºè¿è¡Œåœ¨å¦ä¸€ä¸ªCPUä¸Šã€‚</p> <p><strong>ååé‡</strong>ï¼šå³CPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸CPUæ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ï¼ˆååé‡ = è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ / ( è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + åƒåœ¾æ”¶é›†æ—¶é—´ )ï¼‰ã€‚ä¾‹å¦‚ï¼šè™šæ‹Ÿæœºå…±è¿è¡Œ100åˆ†é’Ÿï¼Œåƒåœ¾æ”¶é›†å™¨èŠ±æ‰1åˆ†é’Ÿï¼Œé‚£ä¹ˆååé‡å°±æ˜¯99%</p> <h3 id="serial-æ”¶é›†å™¨">Serial æ”¶é›†å™¨</h3> <p>Serialæ”¶é›†å™¨æ˜¯æœ€åŸºæœ¬çš„ã€å‘å±•å†å²æœ€æ‚ ä¹…çš„æ”¶é›†å™¨ã€‚</p> <p><strong>ç‰¹ç‚¹</strong>ï¼šå•çº¿ç¨‹ã€ç®€å•é«˜æ•ˆï¼ˆä¸å…¶ä»–æ”¶é›†å™¨çš„å•çº¿ç¨‹ç›¸æ¯”ï¼‰ï¼Œå¯¹äºé™å®šå•ä¸ªCPUçš„ç¯å¢ƒæ¥è¯´ï¼ŒSerialæ”¶é›†å™¨ç”±äºæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œä¸“å¿ƒåšåƒåœ¾æ”¶é›†è‡ªç„¶å¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ‰‹æœºæ•ˆç‡ã€‚æ”¶é›†å™¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°å®ƒç»“æŸï¼ˆStop The Worldï¼‰ã€‚</p> <p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºClientæ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºã€‚</p> <p>Serial / Serial Oldæ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾</p> <p><img src="/img/interviewtopic/jvm2.png" alt="jvm"></p> <h3 id="parnewæ”¶é›†å™¨">ParNewæ”¶é›†å™¨</h3> <p>ParNewæ”¶é›†å™¨å…¶å®å°±æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ã€‚</p> <p>é™¤äº†ä½¿ç”¨å¤šçº¿ç¨‹å¤–å…¶ä½™è¡Œä¸ºå‡å’ŒSerialæ”¶é›†å™¨ä¸€æ¨¡ä¸€æ ·ï¼ˆå‚æ•°æ§åˆ¶ã€æ”¶é›†ç®—æ³•ã€Stop The Worldã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥ç­‰ï¼‰ã€‚</p> <p><strong>ç‰¹ç‚¹</strong>ï¼šå¤šçº¿ç¨‹ã€ParNewæ”¶é›†å™¨é»˜è®¤å¼€å¯çš„æ”¶é›†çº¿ç¨‹æ•°ä¸CPUçš„æ•°é‡ç›¸åŒï¼Œåœ¨CPUéå¸¸å¤šçš„ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨-XX:ParallelGCThreadså‚æ•°æ¥é™åˆ¶åƒåœ¾æ”¶é›†çš„çº¿ç¨‹æ•°ã€‚</p> <p>å’ŒSerialæ”¶é›†å™¨ä¸€æ ·å­˜åœ¨Stop The Worldé—®é¢˜</p> <p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šParNewæ”¶é›†å™¨æ˜¯è®¸å¤šè¿è¡Œåœ¨Serveræ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä¸­é¦–é€‰çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå› ä¸ºå®ƒæ˜¯é™¤äº†Serialæ”¶é›†å™¨å¤–ï¼Œå”¯ä¸€ä¸€ä¸ªèƒ½ä¸CMSæ”¶é›†å™¨é…åˆå·¥ä½œçš„ã€‚</p> <p>ParNew/Serial Oldç»„åˆæ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p> <p><img src="/img/interviewtopic/jvm3.png" alt="jvm"></p> <h3 id="parallel-scavenge-æ”¶é›†å™¨">Parallel Scavenge æ”¶é›†å™¨</h3> <p>ä¸ååé‡å…³ç³»å¯†åˆ‡ï¼Œæ•…ä¹Ÿç§°ä¸ºååé‡ä¼˜å…ˆæ”¶é›†å™¨ã€‚</p> <p><strong>ç‰¹ç‚¹</strong>ï¼šå±äºæ–°ç”Ÿä»£æ”¶é›†å™¨ä¹Ÿæ˜¯é‡‡ç”¨å¤åˆ¶ç®—æ³•çš„æ”¶é›†å™¨ï¼Œåˆæ˜¯å¹¶è¡Œçš„å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼ˆä¸ParNewæ”¶é›†å™¨ç±»ä¼¼ï¼‰ã€‚</p> <p>è¯¥æ”¶é›†å™¨çš„ç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ã€‚è¿˜æœ‰ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„ç‚¹æ˜¯ï¼šGCè‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ï¼ˆä¸ParNewæ”¶é›†å™¨æœ€é‡è¦çš„ä¸€ä¸ªåŒºåˆ«ï¼‰</p> <p>GCè‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ï¼šParallel Scavengeæ”¶é›†å™¨å¯è®¾ç½®-XX:+UseAdptiveSizePolicyå‚æ•°ã€‚å½“å¼€å…³æ‰“å¼€æ—¶ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šæ–°ç”Ÿä»£çš„å¤§å°ï¼ˆ-Xmnï¼‰ã€Edenä¸SurvivoråŒºçš„æ¯”ä¾‹ï¼ˆ-XX:SurvivorRationï¼‰ã€æ™‹å‡è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„ï¼ˆ-XX:PretenureSizeThresholdï¼‰ç­‰ï¼Œè™šæ‹Ÿæœºä¼šæ ¹æ®ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è®¾ç½®è¿™äº›å‚æ•°ä»¥æä¾›æœ€ä¼˜çš„åœé¡¿æ—¶é—´å’Œæœ€é«˜çš„ååé‡ï¼Œè¿™ç§è°ƒèŠ‚æ–¹å¼ç§°ä¸ºGCçš„è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ã€‚</p> <p>Parallel Scavengeæ”¶é›†å™¨ä½¿ç”¨ä¸¤ä¸ªå‚æ•°æ§åˆ¶ååé‡ï¼š</p> <p>XX:MaxGCPauseMillis æ§åˆ¶æœ€å¤§çš„åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´</p> <p>XX:GCRatio ç›´æ¥è®¾ç½®ååé‡çš„å¤§å°ã€‚</p> <h3 id="serial-old-æ”¶é›†å™¨">Serial Old æ”¶é›†å™¨</h3> <p>Serial Oldæ˜¯Serialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚</p> <p><strong>ç‰¹ç‚¹ï¼š</strong> åŒæ ·æ˜¯å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œé‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ã€‚</p> <p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šä¸»è¦ä¹Ÿæ˜¯ä½¿ç”¨åœ¨Clientæ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä¸­ã€‚ä¹Ÿå¯åœ¨Serveræ¨¡å¼ä¸‹ä½¿ç”¨ã€‚</p> <p>Serveræ¨¡å¼ä¸‹ä¸»è¦çš„ä¸¤å¤§ç”¨é€”ï¼ˆåœ¨åç»­ä¸­è¯¦ç»†è®²è§£Â·Â·Â·ï¼‰ï¼š</p> <p>åœ¨JDK1.5ä»¥åŠä»¥å‰çš„ç‰ˆæœ¬ä¸­ä¸Parallel Scavengeæ”¶é›†å™¨æ­é…ä½¿ç”¨ã€‚
ä½œä¸ºCMSæ”¶é›†å™¨çš„åå¤‡æ–¹æ¡ˆï¼Œåœ¨å¹¶å‘æ”¶é›†Concurent Mode Failureæ—¶ä½¿ç”¨ã€‚
Serial / Serial Oldæ”¶é›†å™¨å·¥ä½œè¿‡ç¨‹å›¾ï¼ˆSerialæ”¶é›†å™¨å›¾ç¤ºç›¸åŒï¼‰ï¼š</p> <p><img src="/img/interviewtopic/jvm4.png" alt="jvm"></p> <h3 id="parallel-old-æ”¶é›†å™¨">Parallel Old æ”¶é›†å™¨</h3> <p>æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚</p> <p>ç‰¹ç‚¹ï¼šå¤šçº¿ç¨‹ï¼Œé‡‡ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ã€‚</p> <p>åº”ç”¨åœºæ™¯ï¼šæ³¨é‡é«˜ååé‡ä»¥åŠCPUèµ„æºæ•æ„Ÿçš„åœºåˆï¼Œéƒ½å¯ä»¥ä¼˜å…ˆè€ƒè™‘Parallel Scavenge+Parallel Old æ”¶é›†å™¨ã€‚</p> <p>Parallel Scavenge/Parallel Oldæ”¶é›†å™¨å·¥ä½œè¿‡ç¨‹å›¾ï¼š</p> <p><img src="/img/interviewtopic/jvm5.png" alt="jvm"></p> <h3 id="cmsæ”¶é›†å™¨">CMSæ”¶é›†å™¨</h3> <h4 id="gc-root">GC root</h4> <ul><li>çº¿ç¨‹æ ˆå˜é‡å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡</li> <li>é™æ€å˜é‡å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡</li> <li>å¸¸é‡æ± å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡</li> <li>nativeæ–¹æ³•ä¸­JNIæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡
<strong>ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚</strong></li></ul> <p><strong>ç‰¹ç‚¹</strong>ï¼šåŸºäºæ ‡è®°-æ¸…é™¤ç®—æ³•å®ç°ã€‚å¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚</p> <p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºæ³¨é‡æœåŠ¡çš„å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´æœ€çŸ­ï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½“éªŒç­‰åœºæ™¯ä¸‹ã€‚å¦‚webç¨‹åºã€b/sæœåŠ¡ã€‚</p> <p>CMSæ”¶é›†å™¨çš„è¿è¡Œè¿‡ç¨‹åˆ†ä¸ºä¸‹åˆ—4æ­¥ï¼š</p> <p><strong>åˆå§‹æ ‡è®°</strong>ï¼šæ ‡è®°GC Roots(çº¿ç¨‹æ ˆå˜é‡ é™æ€å˜é‡ å¸¸é‡æ±  JNIæŒ‡é’ˆ)èƒ½ç›´æ¥åˆ°çš„å¯¹è±¡ã€‚é€Ÿåº¦å¾ˆå¿«ä½†æ˜¯ä»å­˜åœ¨Stop The Worldé—®é¢˜ã€‚</p> <p><strong>å¹¶å‘æ ‡è®°</strong>ï¼šè¿›è¡ŒGC Roots Tracing çš„è¿‡ç¨‹ï¼Œæ‰¾å‡ºå­˜æ´»å¯¹è±¡ä¸”ç”¨æˆ·çº¿ç¨‹å¯å¹¶å‘æ‰§è¡Œã€‚</p> <p><strong>é‡æ–°æ ‡è®°</strong>ï¼šä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚ä»ç„¶å­˜åœ¨Stop The Worldé—®é¢˜ã€‚</p> <p><strong>å¹¶å‘æ¸…é™¤</strong>ï¼šå¯¹æ ‡è®°çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤å›æ”¶ã€‚</p> <p>CMSæ”¶é›†å™¨çš„å†…å­˜å›æ”¶è¿‡ç¨‹æ˜¯ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œçš„ã€‚</p> <p>CMSæ”¶é›†å™¨çš„å·¥ä½œè¿‡ç¨‹å›¾ï¼š</p> <p><img src="/img/interviewtopic/jvm6.png" alt="jvm"></p> <p><strong>CMSæ”¶é›†å™¨çš„ç¼ºç‚¹</strong>ï¼š</p> <p>å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿã€‚
æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼Œå¯èƒ½å‡ºç°Concurrent Model Failureå¤±è´¥è€Œå¯¼è‡´å¦ä¸€æ¬¡Full GCçš„äº§ç”Ÿã€‚
å› ä¸ºé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•æ‰€ä»¥ä¼šå­˜åœ¨ç©ºé—´ç¢ç‰‡çš„é—®é¢˜ï¼Œå¯¼è‡´å¤§å¯¹è±¡æ— æ³•åˆ†é…ç©ºé—´ï¼Œä¸å¾—ä¸æå‰è§¦å‘ä¸€æ¬¡Full GCã€‚</p> <h3 id="g1æ”¶é›†å™¨">G1æ”¶é›†å™¨</h3> <p>ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p> <p><strong>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</strong></p> <p><strong>å¹¶è¡Œä¸å¹¶å‘</strong>ï¼šG1èƒ½å……åˆ†åˆ©ç”¨å¤šCPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ªCPUæ¥ç¼©çŸ­Stop-The-Worldåœé¡¿æ—¶é—´ã€‚éƒ¨åˆ†æ”¶é›†å™¨åŸæœ¬éœ€è¦åœé¡¿Javaçº¿ç¨‹æ¥æ‰§è¡ŒGCåŠ¨ä½œï¼ŒG1æ”¶é›†å™¨ä»ç„¶å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®©Javaç¨‹åºç»§ç»­è¿è¡Œã€‚</p> <p><strong>åˆ†ä»£æ”¶é›†</strong>ï¼šG1èƒ½å¤Ÿç‹¬è‡ªç®¡ç†æ•´ä¸ªJavaå †ï¼Œå¹¶ä¸”é‡‡ç”¨ä¸åŒçš„æ–¹å¼å»å¤„ç†æ–°åˆ›å»ºçš„å¯¹è±¡å’Œå·²ç»å­˜æ´»äº†ä¸€æ®µæ—¶é—´ã€ç†¬è¿‡å¤šæ¬¡GCçš„æ—§å¯¹è±¡ä»¥è·å–æ›´å¥½çš„æ”¶é›†æ•ˆæœã€‚</p> <p><strong>ç©ºé—´æ•´åˆ</strong>ï¼šG1è¿ä½œæœŸé—´ä¸ä¼šäº§ç”Ÿç©ºé—´ç¢ç‰‡ï¼Œæ”¶é›†åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜ã€‚</p> <p><strong>å¯é¢„æµ‹çš„åœé¡¿</strong>ï¼šG1é™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ã€‚èƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡Næ¯«ç§’ã€‚</p> <p><strong>G1ä¸ºä»€ä¹ˆèƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹?</strong></p> <p>å› ä¸ºå®ƒæœ‰è®¡åˆ’çš„é¿å…åœ¨æ•´ä¸ªJavaå †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚G1è·Ÿè¸ªå„ä¸ªRegioné‡Œé¢çš„åƒåœ¾å †ç§¯çš„å¤§å°ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„Regionã€‚è¿™æ ·å°±ä¿è¯äº†åœ¨æœ‰é™çš„æ—¶é—´å†…å¯ä»¥è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚</p> <p><strong>G1ä¸å…¶ä»–æ”¶é›†å™¨çš„åŒºåˆ«ï¼š</strong></p> <p>å…¶ä»–æ”¶é›†å™¨çš„å·¥ä½œèŒƒå›´æ˜¯æ•´ä¸ªæ–°ç”Ÿä»£æˆ–è€…è€å¹´ä»£ã€G1æ”¶é›†å™¨çš„å·¥ä½œèŒƒå›´æ˜¯æ•´ä¸ªJavaå †ã€‚åœ¨ä½¿ç”¨G1æ”¶é›†å™¨æ—¶ï¼Œå®ƒå°†æ•´ä¸ªJavaå †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ã€‚è™½ç„¶ä¹Ÿä¿ç•™äº†æ–°ç”Ÿä»£ã€è€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œä»–ä»¬éƒ½æ˜¯ä¸€éƒ¨åˆ†Regionï¼ˆä¸éœ€è¦è¿ç»­ï¼‰çš„é›†åˆã€‚</p> <p><strong>G1æ”¶é›†å™¨å­˜åœ¨çš„é—®é¢˜ï¼š</strong></p> <p>Regionä¸å¯èƒ½æ˜¯å­¤ç«‹çš„ï¼Œåˆ†é…åœ¨Regionä¸­çš„å¯¹è±¡å¯ä»¥ä¸Javaå †ä¸­çš„ä»»æ„å¯¹è±¡å‘ç”Ÿå¼•ç”¨å…³ç³»ã€‚åœ¨é‡‡ç”¨å¯è¾¾æ€§åˆ†æç®—æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»æ—¶ï¼Œå¾—æ‰«ææ•´ä¸ªJavaå †æ‰èƒ½ä¿è¯å‡†ç¡®æ€§ã€‚å…¶ä»–æ”¶é›†å™¨ä¹Ÿå­˜åœ¨è¿™ç§é—®é¢˜ï¼ˆG1æ›´åŠ çªå‡ºè€Œå·²ï¼‰ã€‚ä¼šå¯¼è‡´Minor GCæ•ˆç‡ä¸‹é™ã€‚</p> <p><strong>G1æ”¶é›†å™¨æ˜¯å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜çš„?</strong>ï¼Ÿ</p> <p>é‡‡ç”¨Remembered Setæ¥é¿å…æ•´å †æ‰«æã€‚G1ä¸­æ¯ä¸ªRegionéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„Remembered Setï¼Œè™šæ‹Ÿæœºå‘ç°ç¨‹åºåœ¨å¯¹Referenceç±»å‹è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªWrite Barrieræš‚æ—¶ä¸­æ–­å†™æ“ä½œï¼Œæ£€æŸ¥Referenceå¼•ç”¨å¯¹è±¡æ˜¯å¦å¤„äºå¤šä¸ªRegionä¸­ï¼ˆå³æ£€æŸ¥è€å¹´ä»£ä¸­æ˜¯å¦å¼•ç”¨äº†æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œä¾¿é€šè¿‡CardTableæŠŠç›¸å…³å¼•ç”¨ä¿¡æ¯è®°å½•åˆ°è¢«å¼•ç”¨å¯¹è±¡æ‰€å±çš„Regionçš„Remembered Setä¸­ã€‚å½“è¿›è¡Œå†…å­˜å›æ”¶æ—¶ï¼Œåœ¨GCæ ¹èŠ‚ç‚¹çš„æšä¸¾èŒƒå›´ä¸­åŠ å…¥Remembered Setå³å¯ä¿è¯ä¸å¯¹å…¨å †è¿›è¡Œæ‰«æä¹Ÿä¸ä¼šæœ‰é—æ¼ã€‚</p> <p>å¦‚æœä¸è®¡ç®—ç»´æŠ¤ Remembered Set çš„æ“ä½œï¼ŒG1æ”¶é›†å™¨å¤§è‡´å¯åˆ†ä¸ºå¦‚ä¸‹æ­¥éª¤ï¼š</p> <p><strong>åˆå§‹æ ‡è®°</strong>ï¼šä»…æ ‡è®°GC Rootsèƒ½ç›´æ¥åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹TAMSï¼ˆNext Top at Mark Startï¼‰çš„å€¼ï¼Œè®©ä¸‹ä¸€é˜¶æ®µç”¨æˆ·ç¨‹åºå¹¶å‘è¿è¡Œæ—¶ï¼Œèƒ½åœ¨æ­£ç¡®å¯ç”¨çš„Regionä¸­åˆ›å»ºæ–°å¯¹è±¡ã€‚ï¼ˆéœ€è¦çº¿ç¨‹åœé¡¿ï¼Œä½†è€—æ—¶å¾ˆçŸ­ã€‚ï¼‰</p> <p><strong>å¹¶å‘æ ‡è®°</strong>ï¼šä»GC Rootså¼€å§‹å¯¹å †ä¸­å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»å¯¹è±¡ã€‚ï¼ˆè€—æ—¶è¾ƒé•¿ï¼Œä½†å¯ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œï¼‰</p> <p><strong>æœ€ç»ˆæ ‡è®°</strong>ï¼šä¸ºäº†ä¿®æ­£åœ¨å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºæ‰§è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŒ–çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ã€‚ä¸”å¯¹è±¡çš„å˜åŒ–è®°å½•åœ¨çº¿ç¨‹Remembered Set  Logsé‡Œé¢ï¼ŒæŠŠRemembered Set  Logsé‡Œé¢çš„æ•°æ®åˆå¹¶åˆ°Remembered Setä¸­ã€‚ï¼ˆéœ€è¦çº¿ç¨‹åœé¡¿ï¼Œä½†å¯å¹¶è¡Œæ‰§è¡Œã€‚ï¼‰</p> <p><strong>ç­›é€‰å›æ”¶</strong>ï¼šå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„GCåœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ã€‚ï¼ˆå¯å¹¶å‘æ‰§è¡Œï¼‰</p> <p>G1æ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾ï¼š</p> <p><img src="/img/interviewtopic/jvm7.png" alt="jvm"></p> <h2 id="gc-è°ƒä¼˜æ­¥éª¤">GC è°ƒä¼˜æ­¥éª¤</h2> <ol><li>æ‰“å°GCæ—¥å¿—</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -xloggc:./gc.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p>-XX:+PrintGC è¾“å‡ºGCæ—¥å¿—
-XX:+PrintGCDetails è¾“å‡ºGCçš„è¯¦ç»†æ—¥å¿—
-XX:+PrintGCTimeStamps è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥åŸºå‡†æ—¶é—´çš„å½¢å¼ï¼‰
-XX:+PrintGCDateStamps è¾“å‡ºGCçš„æ—¶é—´æˆ³ï¼ˆä»¥æ—¥æœŸçš„å½¢å¼ï¼Œå¦‚ 2013-05-04T21:53:59.234+0800ï¼‰
-XX:+PrintHeapAtGC åœ¨è¿›è¡ŒGCçš„å‰åæ‰“å°å‡ºå †çš„ä¿¡æ¯
-Xloggc:../logs/gc.log æ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„</p></div> <p>Tomcat å¯ä»¥ç›´æ¥åŠ è½½JAVA_OPTSå˜é‡é‡Œ
2. åˆ†ææ—¥å¿—å¾—åˆ°å…³é”®æ€§æŒ‡æ ‡
3. åˆ†æGCåŸå› ï¼Œè°ƒä¼˜JVMå‚æ•°</p> <p>æ¨èä½¿ç”¨ä¸€ä¸ªGCåˆ†æå·¥å…·<a href="https://gceasy.io/" target="_blank" rel="noopener noreferrer">GCeasy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
å°†ç”Ÿæˆçš„<code>.log</code>æ–‡ä»¶ ä¸Šä¼ ä¸Šå»å³å¯åˆ†æGCæ—¥å¿—</p> <p><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html" target="_blank" rel="noopener noreferrer">JVM å‚æ•° å®˜ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.jianshu.com/p/1c6b5c2e95f9" target="_blank" rel="noopener noreferrer">Jvm ç®€ä¹¦æ€»ç»“<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´: : </span> <span class="time">12/16/2022, 2:22:01 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/home/openuphorizons/interview/1_cas.html" class="prev">
          CAS
        </a></span> <span class="next"><a href="/home/openuphorizons/interview/3_synchronized.html">
          synchronizedåŸç†
        </a>
        â†’
      </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.e1069856.js" defer></script><script src="/assets/js/2.f92a9c00.js" defer></script><script src="/assets/js/144.1ebf2535.js" defer></script><script src="/assets/js/5.f833677d.js" defer></script>
  </body>
</html>
